var e=function(){var e=false;var t;var a;var i=30;var r=Math.PI/180;var o=4*2.54;var n=6*2.54;var l=1200;var d=1200;var s=new PxLoader;var f="Off The Wall";var c=[];var m=[];var h={image:"http://www.offthewallframing.com.au/web/images/logo.png",imageType:"placeholder",width:o*i,height:n*i,setImage:function(e){this.image=e;this.width=e.width;this.height=e.height},setWidth:function(e){this.width=e},setHeight:function(e){this.height=e}};var p=function(e){if("undefined"===typeof e)e=0;var t=h.image;var a=t.width;var i=t.height;var o=document.createElement("canvas");o.width=i;o.height=a;var n=o.getContext("2d");n.save();n.translate(o.width/2,o.height/2);n.rotate(e*r);n.translate(-o.height/2,-o.width/2);n.drawImage(t,0,0);n.restore();h.setImage(o)};var u=function(e,t,a){if("undefined"===typeof e){h.image=void 0;h.imageType="placeholder";return}var i=new PxLoader;i.addImage(e.src);i.addCompletionListener(function(){var i=document.createElement("canvas");var r=i.getContext("2d");i.width=e.width;i.height=e.height;r.drawImage(e,0,0);h.setImage(i);h.setWidth(e.width);h.setHeight(e.height);if("undefined"!==typeof t)h.imageType=t;if("function"===typeof a)a()});i.start()};var g=function(i,r){try{t=document.getElementById(i);a=t.getContext("2d");a.fillStyle="#666";a.fillRect(0,0,t.width,t.height);e=true;if("undefined"!==typeof r){v(r);I()}return e}catch(t){e=false;throw new Error("ERROR: CANVAS NOT SET")}};var _=function(e,t){if(0===e)return c.length;var a={};a.width=a.top=a.bottom=a.left=a.right=e;a.src=t;a.type="frame";c.push(a);return c.length};var w=function(e,t,a,i,r){var o={};o.top=e;o.right=t;o.bottom=a;o.left=i;o.color=r;o.type="matboard";c.push(o);return c.length};var v=function(e){if("undefined"===typeof e)return c.length;var t={};t.width=parseFloat(e.width)||0;if(0==t.width)return c.length;t.top=parseFloat(e.left)||e.width;t.bottom=parseFloat(e.bottom)||e.width;t.left=parseFloat(e.left)||e.width;t.right=parseFloat(e.right)||e.width;t.src=e.src;t.type="frame";c.push(t);return c.length};var $=function(e){c.push(e)};var b=function(){c.pop()};var y=function(){c=[];return c.length};var x=function(){var e=document.createElement("CANVAS");var t=e.getContext("2d");e.width=h.width;e.height=h.height;var a="#EEE";t.fillStyle=a;t.fillRect(0,0,e.width,e.height);var i=45;t.save();t.fillStyle="#2b2b2b";t.font=i+"px Arial";t.baseline="top";t.textAlign="center";var r=f.split("\n");var o=15;for(var n=0;n<r.length;n++)t.fillText(r[n],e.width/2,.25*e.height+175+n*(o+i));t.restore();e=F(e);return e};var k=function(e){f=e};var F=function(e,t){if("undefined"==typeof t)t=.5;var a=e.getContext("2d");a.save();a.shadowBlur=20;a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowColor="rgba(1,1,1,"+t+")";a.lineWidth=20;var i=a.lineWidth/2;a.strokeRect(0-i,0-i,e.width+2*i,e.height+2*i);a.restore();return e};var C=function(e){var t=e.getContext("2d");t.save();t.strokeStyle="white";t.lineWidth=6;var a=t.lineWidth/2;t.strokeRect(0,0,e.width,e.height);t.restore();return e};var I=function(r){if(!e)throw new Error("Not Initialised");if("undefined"!==typeof r){if(r.inches){r.width*=2.54;r.height*=2.54}i=Math.min(l/r.width,d/r.height);h.setWidth(parseFloat(r.width)*i);h.setHeight(parseFloat(r.height)*i)}s=new PxLoader;if("picture"===h.imageType);else h.setImage(new x,"placeholder");function o(){var e=document.createElement("canvas");var i=e.getContext("2d");e.width=h.width;e.height=h.height;i.drawImage(h.image,0,0,e.width,e.height);var r=q(e,c);t.width=r.width;t.height=r.height;a.drawImage(r,0,0)}if(c.length>0){for(var n in c)if(c[n].src)if(m.indexOf(-1==c[n].src)){s.addImage(c[n].src);m.push(c[n].src)}s.addCompletionListener(function(e){o()});s.start()}else o();t.style.zoom="100%"==t.style.zoom?"100.0001%":"100%";return 1};var W=function(e,t){var a=parseFloat(t.left)*i,o=parseFloat(t.right)*i,n=parseFloat(t.top)*i,l=parseFloat(t.bottom)*i;var d=parseFloat(e.width)+a+o;var s=parseFloat(e.height)+n+l;var f=document.createElement("canvas");f.width=d;f.height=s;var c=f.getContext("2d");if("undefined"===typeof t["type"]||"matboard"===t["type"]){c.fillStyle=t.color;c.fillRect(0,0,f.width,f.height)}else{var m=new Image;m.src=t.src;var h=m.height;var p=parseFloat((i*t.width/h).toFixed(2));var u=parseInt(f.width/p);var g=parseInt(f.height/p);c.fillStyle=c.createPattern(m,"repeat-x");c.save();c.scale(p,p);c.fillRect(0,0,u,m.height);c.restore();c.save();c.scale(p,p);c.beginPath();c.translate(u,g);c.rotate(180*r);c.moveTo(0,0);c.fillRect(0,0,u,m.height);c.rotate(180*r);c.restore();c.save();c.scale(p,p);c.translate(0,g);c.rotate(-90*r);c.beginPath();c.moveTo(0,0);c.lineTo(m.height,m.height);c.lineTo(g-m.height,m.height);c.lineTo(g,0);c.lineTo(0,0);c.closePath();c.clip();c.fill();c.rotate(90*r);c.translate(0,-g);c.restore();c.save();c.scale(p,p);c.translate(u,0);c.rotate(90*r);c.beginPath();c.moveTo(0,0);c.lineTo(m.height,m.height);c.lineTo(g-m.height,m.height);c.lineTo(g,0);c.lineTo(0,0);c.closePath();c.clip();c.fill();c.rotate(-90*r);c.translate(-u,0);c.restore()}c.drawImage(e,a,n);return f};var q=function(e,t){if(0==t.length)return e;if("undefined"!==typeof t[t.length-1]["type"]&&"matboard"==t[t.length-1]["type"])e=C(e);if(1==t.length){e=F(e,.4);return W(e,t[0])}else{e=F(e,.25);var a=W(e,t[t.length-1]);return q(a,t.slice(0,t.length-1))}};var T=function(e,t,a,i,r,o){r.textBaseline="bottom";r.font=.1*o.width+"px "+"Arial";r.fillText("Photo Frame",.5*o.width,.6*o.height);r.textBaseline="top";r.font=.175*o.width+"px "+"Arial";r.fillText(e+inchSymbol+separator+t+inchSymbol,.5*o.width,.61*o.height);r.font=.075*o.width+"px "+"Arial";r.fillText(a+cmSymbol+separator+i+cmSymbol,.5*o.width,.8*o.height)};var H=function(e){var a=250;var i=250;if("undefined"!==typeof e){a=e.width;i=e.height}var r=Math.min(a/t.width,i/t.height);var o=document.createElement("canvas");o.width=Math.floor(t.width*r);o.height=Math.floor(t.height*r);var n=o.getContext("2d");n.fillStyle="#FFFFFF";n.fillRect(0,0,o.width,o.height);n.scale(r,r);n.drawImage(t,0,0);return o};var S=function(e,t,i){var o="#2b2b2b";var n=0;if("v"===t[0])n=90;else n=0;var l=a;l.fillStyle=o;l.strokeStyle=o;l.save();l.scale(3,3);l.translate(e.x,e.y);l.rotate(n*r);l.font="8px Arial";l.textBaseline="middle";var d=l.measureText(i).width+5;l.save();l.beginPath();if(90===n){l.scale(-1,-1);l.fillText(i,5-d,0)}else l.fillText(i,3,0);l.closePath();l.fill();l.restore();l.save();l.beginPath();l.moveTo(d+50,-5);l.lineTo(d+60,0);l.lineTo(d+50,5);l.lineTo(d+50,-5);l.fill();l.closePath();l.restore();l.save();l.beginPath();l.lineWidth=2;l.moveTo(d+50,0);l.lineTo(d,0);l.stroke();l.closePath();l.restore();l.restore()};var P=function(){return c.length};return{clearFrames:y,addFrame:v,removeFrame:b,createFrame:_,createMat:w,setPlaceholderText:k,draw:I,init:g,setImage:u,rotateImage:p,addItem:$,thumb:H,frameCount:P}};if(!String.prototype.startsWith)String.prototype.startsWith=function(e,t){t=t||0;return this.indexOf(e,t)===t};if(!String.prototype.endsWith)String.prototype.endsWith=function(e,t){var a=this.toString();if("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>a.length)t=a.length;t-=e.length;var i=a.indexOf(e,t);return-1!==i&&i===t};var t="";$(document).ready(function(){$('[name="printing-type"]').on({change:function(){$(".printing-info").hide();$('.printing-info[data-info-id="'+$(this).val()+'"]').show()}});$('[name="matt-canvas-printing-type"]').on({change:function(){$(".offtwl__matt-canvas-printing-info").hide();$('.offtwl__matt-canvas-printing-info[data-info-id="'+$(this).val()+'"]').show()}});$('[name="glass-type"]').on({change:function(){$(".offtwl__glass-notes").hide();$('.offtwl__glass-notes[data-info-id="'+$(this).val()+'"]').show()}});$('[name="backing-type"]').on({change:function(){$(".backing-info").hide();$('.backing-info[data-info-id="'+$(this).val()+'"]').show()}});$('[data-toggle="tooltip"]').tooltip();$('[data-toggle="popover"]').popover({trigger:"focus"})});function a(e){return(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?"black":"white"}function i(){var e=document.querySelector("#offtwl__dmnsn-width"),t=document.querySelector("#offtwl__dmnsn-height"),a=document.querySelector("#offtwl__dimension-type-wrapper input[name=unit-type]:checked").value;e.value<0&&(e.value=1),t.value<0&&(t.value=1),"cm"==a?(e.value,t.value):(e.value>60&&(e.value=60),t.value>60&&(t.value=60))}function r(){if("true"==$("#offtwl__dimention-image-ratio").attr("data-locked")){var e=p.printing.image.aspectRatio;"width"==$(this).attr("data-for")?$("#offtwl__dmnsn-height").val(($(this).val()/e).toFixed(1)):$("#offtwl__dmnsn-width").val(($(this).val()*e).toFixed(1))}}function o(e){e.startsWith("108")?($('[name=offtwl__how-many-mats][value="0"]').click(),$("[name=glass-type][value=no-glass]").click(),$("[name=backing-type][value=none]").click(),$("[name=slip][value=none]").click(),$(".remove-image").click(),$("[name=printing-type][value=none]").click(),$("[name=matt-canvas-printing-type][value=matt-canvas-none]").click(),$('#upload, [aria-controls="offtwl__mats-tab"], [aria-controls="offtwl__glass-and-backing-tab"], [aria-controls="tab-slips"], [aria-controls="offtwl__fillets-tab"], [aria-controls="offtwl__print-info-tab"]').fadeOut(150)):($("[name=glass-type][value=clear-glass]").click(),"none"===$("[name=backing-type]:checked").val()&&$('[name=backing-type][value="offtwl__backing-type-adhesive-foamcore"]').click(),$('#upload, #show-more-tabs, [aria-controls="offtwl__mats-tab"], [aria-controls="offtwl__glass-and-backing-tab"], [aria-controls="offtwl__print-info-tab"]').fadeIn(150),$("#show-more-tabs").parent().fadeIn(150))}function n(e){$("#frame-detail-code").html(e.frameCode),$("#frame-detail-depth").html(e.frameDepth.toFixed(1)+" cm"),$("#frame-detail-width").html(e.frameWidth.toFixed(1)+" cm"),$("#frame-detail-rebate").html(e.frameRebate.toFixed(1)+" cm"),$("#frame-detail-colour").html(e.frameDesc),$("#frame-detail-material").html(e.frameMaterial);var t=$("#frame-detail-description");e.frameDescription?(t.html(e.frameDescription),t.parent().show()):t.parent().hide()}function l(){var e=m/300;if("cm"==$("span.offtwl__dmnsn-inch-cm").html())var t=Math.min(e/($("#offtwl__dmnsn-width").val()/2.54)*100,100);else var t=Math.min(e/$("#offtwl__dmnsn-width").val()*100,100);t<=0?($("#offtwl__upload-quality-progress").css("width","100%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-danger progress-bar-good progress-bar-excellent progress-bar-warning"),$("#offtwl__upload-quality-progress").addClass("progress-bar-info"),$("#offtwl__upload-quality-text").html("No Image Detected")):t>0&&t<=25?($("#offtwl__upload-quality-progress").css("width",t+"%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-good progress-bar-excellent progress-bar-warning progress-bar-info"),$("#offtwl__upload-quality-progress").addClass("progress-bar-danger"),$("#offtwl__upload-quality-text").html("Poor")):t>25&&t<=40?($("#offtwl__upload-quality-progress").css("width",t+"%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-good progress-bar-excellent progress-bar-danger progress-bar-info"),$("#offtwl__upload-quality-progress").addClass("progress-bar-warning"),$("#offtwl__upload-quality-text").html("Not Bad")):t>40&&t<70?($("#offtwl__upload-quality-progress").css("width",t+"%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-warning progress-bar-danger progress-bar-excellent progress-bar-info"),$("#offtwl__upload-quality-progress").addClass("progress-bar-good"),$("#offtwl__upload-quality-text").html("Good")):t>70&&t<90?($("#offtwl__upload-quality-progress").css("width",t+"%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-warning progress-bar-danger progress-bar-excellent progress-bar-info"),$("#offtwl__upload-quality-progress").addClass("progress-bar-good"),$("#offtwl__upload-quality-text").html("Great")):($("#offtwl__upload-quality-progress").css("width",t+"%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-danger progress-bar-warning progress-bar-good progress-bar-info"),$("#offtwl__upload-quality-progress").addClass("progress-bar-excellent"),$("#offtwl__upload-quality-text").html("Excellent"))}function d(e){var t=$("#no-mdf-info");!0===e?($("[name=backing-type][value=offtwl__backing-type-adhesive-foamcore]").click(),$("[name=backing-type][value=offtwl__backing-type-mdf]").prop("disabled",!0).addClass("disabled").parent().addClass("disabled").find(".offtwl__outer-el").addClass("disabled"),t.show()):($("[name=backing-type][value=offtwl__backing-type-mdf]").prop("disabled",!1).removeClass("disabled").parent().removeClass("disabled").find(".offtwl__outer-el").removeClass("disabled"),t.hide())}function s(e){1==e?($("[name=printing-type]").prop("disabled",!1).addClass("disabled").parent().removeClass("disabled").find(".offtwl__outer-el").removeClass("disabled"),d(!0)):($("[data-paper-type=none]").click(),$("[name=printing-type]").prop("disabled",!0).addClass("disabled").parent().addClass("disabled").find(".offtwl__outer-el").addClass("disabled"),d(),$(".offtwl__image-description").fadeOut(150),$(".offtwl__upload-img-quality-holder").fadeOut(150),$("#upload-info-alert").fadeIn(150),p.printing={paper:"none",image:{url:"",originalWidth:0,originalHeight:0,aspectRatio:0,name:""},price:0},I.setImage(),$("#offtwl__dimention-image-ratio").attr("data-locked",!1),I.draw())}function f(){var e=$(this).find(".toggle-icon");e.hasClass("fa-plus")?e.removeClass("fa-plus").addClass("fa-minus"):e.removeClass("fa-minus").addClass("fa-plus")}function c(){var e=document.querySelector("[name=offtwl__typeof-matboard-wdt]:checked").value,t=parseFloat(this.min),a=parseFloat(this.max),i=parseFloat(this.value),r=i;if(i<t?r=t:i>a&&(r=a),r!=i&&(this.value=r,"offtwl__unifrm"===e))for(var o=document.getElementById("offtwl__fldst-var").querySelectorAll("input[type=number]"),n=0;n<o.length;n++)o[n].value=r;v.calc()}var m=0,h=0;$("#show-more-tabs").on("click tap",function(e){e.preventDefault(),$("#show-more-tabs").parent().fadeOut(50),$(".hidden-tabs").fadeIn(150),$("#ui-id-6").click(),$(".offtwl__cardbox-tab-list a").css({padding:"5px 5px","font-size":"1.3rem"})}),$("[id^=frame-tab]").each(function(){var e="#"+$(this).attr("id")+" img.lazy";$(e).lazyload({effect:"fadeIn",threshold:20,container:$("#"+$(this).attr("id"))})});var p={imageWidth:10.16,imageHeight:15.24,printing:{paper:"none",image:{file:"",originalWidth:0,originalHeight:0,aspectRatio:0,name:""},price:0},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,frame:{frameCode:"224F",frameDepth:2,frameDesc:"Black",frameId:238,frameMaterial:"Wood",frameMax:120,frameMin:10,frameRate:2,frameRebate:.5,frameTile:"top_frame_238.jpg",frameWidth:2},slip:{frame:{frameId:""},price:0},fillet:{frame:{frameId:""},price:0},glass:void 0,backing:void 0,matboards:{mat1:{id:"",colorCode:"",top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0},mat2:{id:"",colorCode:"",top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0}},price:0,discountedPrice:0,newDiscountedPrice:0,framePrice:0,glassPrice:0,backingPrice:0,quantity:0,productType:"custom-frame"};n(p.frame),$("#order-step-tabs").tabs();var u=$(".offtwl__select-frame-container");u.mCustomScrollbar({axis:"x",theme:"dark-3",advanced:{autoExpandHorizontalScroll:true},mouseWheel:{scrollAmount:150}});function g(){$("#select-frame-dropdown").on("change",function(e){$("#offtwl__frame-ctgry-tab-list li a[href='#"+this.value+"']").tab("show")})}g();var w=function(){var e=$("#offtwl__glance-discount-row-value"),t=$("#offtwl__glance-discount-row-percent"),a=parseInt(t.data("discount-percentage")),r=a/100;function o(i,o){var n=i,l=(n*r).toFixed(4),d=n-l;if("number"===typeof d){t.html(a+"%");e.html(l)}p.newDiscountedPrice=d;p.discountedPrice=l;return d}var n,l=!1,d=[],f=$("#offtwl__dmnsn-width"),c=$("#offtwl__dmnsn-height"),u=!1,g=!1,w=!0,v=!1,b=!1,y=!1,x=!1,k=!1,F=function(){if(l)return!0;$.ajax({type:"GET",url:"static/json/price-list.json",success:function(e){n=e,l=!0,B()},error:function(e,t,a){void 0}})},C=function(e,t){I.setImage(e,"picture",function(){$("#preset-type-list").addClass("disabled").prop("disabled",!0),$("#offtwl__dmnsn-width").val((.015*e.width).toFixed(2)),$("#offtwl__dmnsn-height").val((.015*e.height).toFixed(2)),t&&"function"==typeof t&&t(),B()})},W=function(){if(p.printing.paper=$("[name=printing-type]:checked").val(),p.glass=$("[name=glass-type]:checked").val(),p.backing=$("[name=backing-type]:checked").val(),v=$('[name="slip"][value="add"]').prop("checked")){var e=p.slip.frame.frameCode;""==p.slip.frame.frameId&&""!=e&&(p.slip.frame.frameId=$("[data-frame-code="+e+"]").data("frameId"))}else p.slip.frame.frameId="";if(b=$('[name="fillet"][value="add"]').prop("checked")){var t=p.fillet.frame.frameCode;""==p.fillet.frame.frameId&&""!=t&&(p.fillet.frame.frameId=$("[data-frame-code="+t+"]").data("frameId"))}else p.fillet.frame.frameId="";k="none"!=p.printing.paper},q=function(){var e=p,t="inch"==T;e.imageWidth=parseFloat(f.val()),e.imageHeight=parseFloat(c.val()),t&&(e.imageWidth*=2.54,e.imageHeight*=2.54),e.imageWidth=parseFloat(e.imageWidth).toFixed(2),e.imageHeight=parseFloat(e.imageHeight).toFixed(2),e.innerWidth=parseFloat(e.imageWidth),e.innerHeight=parseFloat(e.imageHeight);for(var a in e.matboards)e.innerWidth+=parseFloat(e.matboards[a].left)||0,e.innerWidth+=parseFloat(e.matboards[a].right)||0,e.innerHeight+=parseFloat(e.matboards[a].top)||0,e.innerHeight+=parseFloat(e.matboards[a].bottom)||0;b&&(e.innerWidth+=2*e.fillet.frame.frameWidth,e.innerHeight+=2*e.fillet.frame.frameWidth),e.innerWidth=parseFloat(e.innerWidth).toFixed(2),e.innerHeight=parseFloat(e.innerHeight).toFixed(2),e.outerWidth=(parseFloat(e.innerWidth)+2*parseFloat(e.frame.frameWidth)-2*parseFloat(e.frame.frameRebate)).toFixed(2),e.outerHeight=(parseFloat(e.innerHeight)+2*parseFloat(e.frame.frameWidth)-2*parseFloat(e.frame.frameRebate)).toFixed(2);var i=e.innerWidth>=10&&e.innerHeight>=10,r=e.innerWidth<=152.5&&e.innerHeight<=152.5,o=e.innerWidth<=152.5&&e.innerHeight<=101.6||e.innerWidth<=101.6&&e.innerHeight<=152.5;w=Math.max(e.innerWidth,e.innerHeight)<=e.frame.frameMax,$("#max-frame-length-error").html(e.frame.frameMax),u=i&&e.imageWidth<=152.5&&e.imageHeight<=152.5&&(e.imageWidth<=152.5&&e.imageHeight<=101.6||e.imageWidth<=101.6&&e.imageHeight<=152.5),g=i&&o&&r,_.debounce(function(){u&&!g?$("#offtwl__mat1-dimnsn-not-valid, #mat2-dimensions-invalid").show(250):u&&$("#offtwl__mat1-dimnsn-not-valid, #mat2-dimensions-invalid").hide(250),g?$("#offtwl__dmnsn-warning").fadeOut(150):$("#offtwl__dmnsn-warning").fadeIn(150),!w&&g?$("#larger-than-max-error").show(250):$("#larger-than-max-error").hide(250)},500)()},H=function(){if(!l)return!1;var e=void 0,t=void 0,a=void 0,i=!1,r=!1,d=parseFloat(p.imageWidth)+parseFloat(p.imageHeight),s=parseFloat(p.innerWidth)+parseFloat(p.innerHeight),f=s+4*(v?parseFloat(p.slip.frame.frameWidth):0);p.quantity=parseFloat($("#offtwl__product-quantity").val()||1);for(var c in n)if(!i&&c>=d&&(a=n[c],i=!0),!r&&c>=s&&(t=n[c],r=!0),c>=f){e=n[c];break}if(e)if(g&&w){$("#offtwl__addToCartButton").prop("disabled",!1);void 0;void 0;void 0;void 0;void 0;var m=p.framePrice=parseFloat(e.rate[p.frame.frameRate]),h=p.matboards.mat1.price=""!=y?t.top_mat:0,u=p.matboards.mat2.price=""!=x?t.middle_mat:0,_=p.fillet.price=b?a.rate[p.fillet.frame.frameRate]:0,F=p.slip.price=v?t.rate[p.slip.frame.frameRate]:0,C=p.glassPrice=parseFloat(t[p.glass])||0,I=p.backingPrice=parseFloat(t[p.backing])||0,W=p.printing.price=k?parseFloat(a[p.printing.paper]):0,q=m+h+u+_+F+C+I+W,T=(q*p.quantity).toFixed(2);p.price=T,$("[data-price-subscriber]").each(function(){var e=o(T);void 0;void 0;void 0;$(this).html("$"+e)})}else $("[data-price-subscriber]").each(function(){$(this).html("N/A")}),$("#offtwl__addToCartButton").prop("disabled",!0)},S=function(){var e={width:p.frame.frameWidth,src:"./images/frame_images/large/"+p.frame.frameTile};self.isFloat=p.frame.frameCode.startsWith("108"),I.addFrame(e)},P=function(){var e={width:p.slip.frame.frameWidth,src:"./images/frame_images/large/"+p.slip.frame.frameTile};I.addFrame(e)},E=function(){var e={width:p.fillet.frame.frameWidth,src:"./images/frame_images/large/"+p.fillet.frame.frameTile};I.addFrame(e)},M=function(){var e,t,a,i,r=p.matboards,o=parseInt(document.querySelector("[name=offtwl__how-many-mats]:checked").value),n=document.querySelector("[name=offtwl__typeof-matboard-wdt]:checked").value;if(y=!1,x=!1,o>0){if(y=!0,"offtwl__unifrm"==n)e=t=a=i=document.getElementById("offtwl__unifrm-width").value;else"variable"==n&&(e=document.getElementById("offtwl__dimnsn-top").value,a=document.getElementById("offtwl__dimnsn-bottom").value,t=document.getElementById("offtwl__dimnsn-left").value,i=document.getElementById("offtwl__dimnsn-right").value);"inch"==T&&(e*=2.54,a*=2.54,t*=2.54,i*=2.54),r.mat1.top=e,r.mat1.bottom=a,r.mat1.left=t,r.mat1.right=i,I.createMat(e,i,a,t,"#"+r.mat1.colorCode),o>1&&(x=!0,e=t=a=i=document.getElementById("offtwl__matboard-2-wdt").value,"inch"==T&&(e*=2.54,a*=2.54,t*=2.54,i*=2.54),r.mat2.top=e,r.mat2.bottom=a,r.mat2.left=t,r.mat2.right=i,I.createMat(e,i,a,t,"#"+r.mat2.colorCode))}for(var l=Object.keys(r),d=o;d<l.length;d++)r[l[d]]={id:"",colorCode:r[l[d]].colorCode,top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0}},O=function(){i(),I.draw({width:p.imageWidth,height:p.imageHeight})},L=function(){var e=parseFloat(parseFloat($("#offtwl__dmnsn-width").val()).toFixed(2)),t=parseFloat(parseFloat($("#offtwl__dmnsn-height").val()).toFixed(2)),a=.12,i=.6;(e>=40||t>=40)&&(i=1,a=.39);var r="cm"===T?i:a,o=parseFloat(parseFloat(e-r).toFixed(2)),n=parseFloat(parseFloat(t-r).toFixed(2)),l=["Image Size:",e,"x",t,T,"\n","Visible (approx):",o,"x",n,T,"\n","Outer Size (approx):",p.outerWidth,"x",p.outerHeight,"cm"].join(" ");I.setPlaceholderText(l)},A=function(){v?$("#offtwl__glance-slip-row").fadeIn(100):$("#offtwl__glance-slip-row").fadeOut(100),b?$("#offtwl__glance-fillet-row").fadeIn(100):$("#offtwl__glance-fillet-row").fadeOut(100),y?$("#offtwl__glance-mat-top-row").fadeIn(100):$("#offtwl__glance-mat-top-row").fadeOut(100),x?$("#offtwl__glance-mat-bottom-row").fadeIn(100):$("#offtwl__glance-mat-bottom-row").fadeOut(100),k?$("#offtwl__glance-printing-row").fadeIn(100):$("#offtwl__glance-printing-row").fadeOut(100);var e=new RegExp("-","g");$("#offtwl__glance-frame").html(p.frame.frameCode),$("#offtwl__glance-slip").html(p.slip.frame.frameCode),$("#offtwl__glance-fillet").html(p.fillet.frame.frameCode),$("#offtwl__glance-mat-top").html(p.matboards.mat1.matName),$("#offtwl__glance-mat-bottom").html(p.matboards.mat2.matName),$("#offtwl__glance-glass").html(p.glass.replace(e," ").replace("glass","")),$("#offtwl__glance-backing").html(p.backing.replace(e," ").replace("glass","")),$("#offtwl__glance-image-size").html(p.imageWidth+" x "+p.imageHeight+" cm"),$("#offtwl__glance-glass-size").html(p.innerWidth+" x "+p.innerHeight+" cm"),$("#offtwl__glance-outer-size").html(p.outerWidth+" x "+p.outerHeight+" cm"),$("#summary-printing").html(p.printing.paper),$("#offtwl__glance-frame-price").html("$ "+p.framePrice.toFixed(2)),$("#offtwl__glance-slip-price").html("$ "+p.slip.price.toFixed(2)),$("#offtwl__glance-fillet-price").html("$ "+p.fillet.price.toFixed(2)),$("#offtwl__glance-mat-top-price").html("$ "+p.matboards.mat1.price.toFixed(2)),$("#offtwl__glance-mat-bottom-price").html("$ "+p.matboards.mat2.price.toFixed(2)),$("#offtwl__glance-glass-price").html("$ "+p.glassPrice.toFixed(2)),$("#offtwl__glance-backing-price").html("$ "+p.backingPrice.toFixed(2)),$("#summary-printing-price").html("$ "+p.printing.price.toFixed(2)),$("#error-current-selection-size").html($("#offtwl__glance-glass-size").html())},R=function(e,t){var a=[];$('[id^="frame-tab"] [data-frame-code]').each(function(){a.push(this)});var i=_.filter(a,e,t);return _.sortBy(i,function(e){return e.dataset.frameWidth})},D=function(e,t){var a=function(t){return t.dataset.frameMax<e},i=R(a);$(".unstable-frame").removeClass("unstable-frame"),$(".unstable-frame-hidden").removeClass("unstable-frame-hidden"),!0===t?$(i).addClass("unstable-frame").addClass("unstable-frame-hidden"):$(i).addClass("unstable-frame")},B=function(){I.clearFrames(),W(),S(),v&&P(),M(),b&&E(),q(),D(Math.max(p.imageWidth,p.imageHeight),$("#hide-unstable-frames").prop("checked")),L(),O(),H(),A()},j=_.debounce(B,100,{leading:!0}),z=function(e){$(e).on("change input click",j),d.push($(e))},N=function(){return n};return $(document).ready(function(){s(1),$(".remove-image").on("click",function(){s(1),$("#preset-type-list").removeClass("disabled").prop("disabled",!1),$("#offtwl__upload-quality-progress").css("width","100%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-excellent progress-bar-good progress-bar-warning progress-bar-danger"),$("#offtwl__upload-quality-progress").addClass("progress-bar-info"),$("#offtwl__upload-quality-text").html("No Image Detected"),m=0,h=0}),$("[data-offtwl__calculation-item]").each(function(e,t){d.push(t),$(t).on("change",j).on("input",j).on("click",function(){"SPAN"===$(this).prop("tagName")&&j()})})}),{init:F,addBroadcaster:z,setImage:C,prices:N,filter:R,calc:j}},v=new w;v.init(),$("[name=fillet][value=add]").parent().on("click",function(){1==$(this).children(":first").prop("disabled")&&$("#fillet-no-mat-warning").fadeIn()}),$("[name=fillet]").on("change",function(e){"add"==$("[name=fillet]:checked").val()&&(0==parseInt($("[name=offtwl__how-many-mats]:checked").val())?($("#fillet-no-mat-warning").fadeIn(),$('[name=fillet][value="none"]').click()):$("#fillet-no-mat-warning").fadeOut(),""===p.fillet.frame.frameId&&$(".offtwl__thumb-frame-container.fillet-frame").first().click())});var b="",y=p.matboards;document.getElementById("offtwl__unifrm-width").addEventListener("input",function(){for(var e=document.querySelectorAll("#variable-width input[type=number]"),t=0;t<e.length;t++)e[t].value=this.value});for(var x=document.querySelectorAll("[name=offtwl__typeof-matboard-wdt]"),k=0;k<x.length;k++)x[k].addEventListener("change",function(){switch(document.querySelector("[name=offtwl__typeof-matboard-wdt]:checked").value){case"offtwl__unifrm":document.getElementById("offtwl__unifrm-width").disabled=!1,document.getElementById("variable-width").disabled=!0;break;case"variable":document.getElementById("offtwl__unifrm-width").disabled=!0,document.getElementById("variable-width").disabled=!1}});for(var F=document.querySelectorAll(".offtwl__matboard-sqr"),C=0;C<F.length;C++)F[C].style.color=a(F[C].dataset.colorCode),F[C].addEventListener("click",function(e){y[this.dataset.offtwl__matObj].id=this.dataset.matId,y[this.dataset.offtwl__matObj].colorCode=this.dataset.colorCode,y[this.dataset.offtwl__matObj].matCode=this.dataset.code,y[this.dataset.offtwl__matObj].matName=this.dataset.name,b=this.dataset.colorCode;var t=document.querySelector('[data-slider-value="'+this.dataset.sliderValue+'"][data-selected="true"]');t&&(t.dataset.selected=!1,t.innerHTML=""),this.dataset.selected=!0,this.innerHTML='<span class="glyphicon glyphicon-ok offtwl__selected-icon"></span>';var a=document.querySelector("[name=offtwl__how-many-mats]:checked");parseInt(a.value)<1&&document.querySelector('[name="offtwl__how-many-mats"][value="1"]').click()}),v.addBroadcaster(F[C]);$("[name=offtwl__how-many-mats]").on("change",function(e){switch(parseInt($("[name=offtwl__how-many-mats]:checked").val())){case 0:$("#offtwl__field-matboard-1").prop("disabled",!0),$("#fieldset-matboard-2").fadeOut(),$('[name=fillet][value="none"]').click(),$('[name=fillet][value="add"]').prop("disabled",!0),$("#fillet-no-mat-warning").fadeIn(),$(".offtwl__matboard-sqr[data-selected=true]").html("").attr("data-selected",!1);break;case 1:$("#offtwl__field-matboard-1").prop("disabled",!1),$("#fieldset-matboard-2").fadeOut(),$("#fillet-no-mat-warning").fadeOut(),$('[name=fillet][value="add"]').prop("disabled",!1),""==y.mat1.id&&(""!=y.mat1.colorCode?$(".offtwl__matboard-sqr[data-offtwl__mat-obj=mat1][data-color-code="+y.mat1.colorCode+"]").click():$(".offtwl__matboard-sqr[data-offtwl__mat-obj=mat1]").first().click());break;case 2:$("#offtwl__field-matboard-1").prop("disabled",!1),$("#fieldset-matboard-2").fadeIn(),$("#fillet-no-mat-warning").fadeOut(),$('[name=fillet][value="add"]').prop("disabled",!1),""==y.mat1.id&&(""!=y.mat1.colorCode?$(".offtwl__matboard-sqr[data-offtwl__mat-obj=mat1][data-color-code="+y.mat1.colorCode+"]").click():$(".offtwl__matboard-sqr[data-offtwl__mat-obj=mat1]").first().click()),""==y.mat2.id&&(""!=y.mat2.colorCode?$(".offtwl__matboard-sqr[data-offtwl__mat-obj=mat2][data-color-code="+y.mat2.colorCode+"]").click():$(".offtwl__matboard-sqr[data-offtwl__mat-obj=mat2]").first().click())}});var I=new e,W=10.1,q=15.2;$("#offtwl__dimension-type-wrapper input[name=unit-type]:first ~ span").click();for(var T=document.querySelector("#offtwl__dimension-type-wrapper input[name=unit-type]:checked").value,H=function(){var e=[];return{subscribe:function(t){e.push(t)},unsubscribe:function(t){for(;-1!=e.indexOf(val);)e.splice(k,1)},convertUnits:function(){for(var t="cm"==T?"inch":"cm",a=0;a<e.length;a++)switch(T){case"inch":if("offtwl__dmnsn-unit-label"==e[a].dataset.type){e[a].innerHTML="cm";break}if("offtwl__dmnsn-unit-value"==e[a].dataset.type){e[a].innerHTML=e[a].dataset.cmValue;break}if("standard-conversion"==e[a].dataset.type){e[a].innerHTML=(2.54*parseFloat(e[a].innerHTML)).toFixed(1);break}W=(2.54*parseFloat(W)).toFixed(1),q=(2.54*parseFloat(q)).toFixed(1),e[a].value=(2.54*e[a].value).toFixed(1),e[a].setAttribute("min",e[a].dataset.cmMin),e[a].setAttribute("max",e[a].dataset.cmMax),e[a].setAttribute("step",e[a].dataset.cmStep);break;case"cm":if("offtwl__dmnsn-unit-label"==e[a].dataset.type){e[a].innerHTML="inch";break}if("offtwl__dmnsn-unit-value"==e[a].dataset.type)e[a].innerHTML=e[a].dataset.inchValue;else if("standard-conversion"==e[a].dataset.type){e[a].innerHTML=(parseFloat(e[a].innerHTML)/2.54).toFixed(1);break}W=(parseFloat(W)/2.54).toFixed(1),q=(parseFloat(q)/2.54).toFixed(1),e[a].value=(e[a].value/2.54).toFixed(1),e[a].setAttribute("min",e[a].dataset.inchMin),e[a].setAttribute("max",e[a].dataset.inchMax),e[a].setAttribute("step",e[a].dataset.inchStep)}T=t}}},S=new H,P=document.querySelectorAll(".offtwl__dmnsn-inch-cm"),k=0;k<P.length;k++)S.subscribe(P[k]);for(var E=document.querySelectorAll("#offtwl__dimension-type-wrapper input[type=radio]"),k=0;k<E.length;k++)E[k].addEventListener("change",function(){S.convertUnits()});$("#offtwl__dmnsn-width, #offtwl__dmnsn-height").on("input change",r),I.init("canvas"),$(".offtwl__select-frame-container").mousewheel(function(e,t){this.scrollLeft-=45*t,e.preventDefault()}),$(".offtwl__thumb-frame-container").each(function(){$(this).hasClass("slip-frame")?$(this).on("click",function(){$(".slip-thumb-selected").removeClass("slip-thumb-selected"),$(this).addClass("slip-thumb-selected"),p.slip.frame=$.extend(!0,{},$(this).data()),$('[name="slip"]').prop("checked")||$('[name="slip"][value="add"]').click()}):$(this).hasClass("fillet-frame")?$(this).on("click",function(){$(".fillet-thumb-selected").removeClass("fillet-thumb-selected"),$(this).addClass("fillet-thumb-selected"),p.fillet.frame=$.extend(!0,{},$(this).data()),$('[name="fillet"]').prop("checked")||$('[name="fillet"][value="add"]').click()}):$(this).on("click",function(){$(".frame-thumb-selected").removeClass("frame-thumb-selected"),$(this).addClass("frame-thumb-selected"),p.frame=$.extend(!0,{},$(this).data()),o(p.frame.frameCode),n($(this).data()),$("#thumb-selected").removeAttr("id"),$(this).attr("id","thumb-selected")}),v.addBroadcaster($(this))});for(var M=document.querySelectorAll("[name=unit-type]"),k=0;k<M.length;k++)M[k].addEventListener("click",function(e){var t=document.querySelectorAll(".offtwl__data-inch"),a=document.querySelectorAll(".offtwl__data-cm");if("cm"==this.value)for(var i=0;i<t.length;i++)a[i].classList.remove("hidden-xs"),a[i].classList.remove("hidden-sm"),t[i].classList.add("hidden-xs"),t[i].classList.add("hidden-sm");else for(var i=0;i<t.length;i++)a[i].classList.add("hidden-xs"),a[i].classList.add("hidden-sm"),t[i].classList.remove("hidden-xs"),t[i].classList.remove("hidden-sm")});var O=function(){var e=0,t=0,a=[],i=[],r=function(){var e=document.createElement("DIV");return e.id="cart-notification",e.style.opacity=1,e.style.position="fixed",e.style.right="30px",e.style.top="90px",e.style.zIndex=1e3,e.innerHTML='<div id="offtwl__popup-notification" class="row">                          <div class="offtwl__popup-notification-element offtwl__icon col-xs-5">                          <img src="/static/images/shopping-cart-white.png">                            </div>                            <div class="offtwl__popup-notification-element offtwl__message col-xs-7">                                    Item successfully added to cart!                            </div>                            </div>',$(e).on("click",function(){}),e},o=function(){var e=new r;$("body").append($(e)),$(e).fadeIn(150).delay(1e3).fadeOut(250)},n=function(t){t&&(e=t),$(i).each(function(){$(this).html(e)})},l=function(e){e&&(t=e),$(a).each(function(){$(this).html(t)})},d=function(){$("[data-cart-product-units]").each(function(e){a.push($(this))}),$("[data-cart-total-price]").each(function(e){i.push($(this))})};return{init:d,notifyQuantity:l,notifyTotalPrice:n,toast:o}};"undefined"==typeof headerCart&&(headerCart=new O,headerCart.init()),$("#offtwl__addToCartButton").on("click",function(){if("true"!==$(this).attr("data-disabled")){var e={product:p,thumb:I.thumb().toDataURL(),uploadedImg:t,_token : $('meta[name="csrf-token"]').attr('content')},a=$(this);void 0;"true"!==a.attr("data-disabled")&&(a.attr("data-disabled","true"),$.ajax({type:"POST",url:"photo-frame-add-to-cart",data:e,success:function(e){headerCart.notifyQuantity(e.totalProducts),headerCart.notifyTotalPrice((e.totalPrice||0).toFixed(2)),headerCart.toast(),a.attr("data-disabled","false")},error:function(e,t,i){void 0,void 0,a.attr("data-disabled","false")}}))}}),$('[id^="frame-tab"]').parent().on("click",function(e){var t=e.target;t.href&&-1!=t.href.indexOf("frame-tab-")&&(t.href.endsWith("#offtwl__frm-tab-float-canvas")?$("#offtwl__frame-warning").slideDown(250):$("#offtwl__frame-warning").slideUp(150))}),$("#frame-code-filter").on("input",function(){if(!($(this).val().length<1)){if(void 0==this.frameData){var e=[];$('[id^="frame-tab"]:not(#offtwl__frm-tab-filtered-result) [data-frame-code]').each(function(){e.push(this)}),this.frameData=e}$('a[href="#offtwl__frm-tab-filtered-result"].ui-tabs-anchor').parent().hasClass("ui-state-active")||$('a[href="#offtwl__frm-tab-filtered-result"].ui-tabs-anchor').click();var t=$(this).val().toUpperCase(),a=_.filter(this.frameData,function(e){return _.startsWith(e.dataset.frameCode.toUpperCase(),t)}),i=$("#offtwl__frm-tab-filtered-result");i.unbind(),i.empty(),i.mousewheel(function(e,t){this.scrollLeft-=45*t,e.preventDefault()}),$(a).each(function(){$(this).clone(!0).appendTo($("#offtwl__frm-tab-filtered-result"))}),$("#offtwl__frm-tab-filtered-result .lazy").lazyload({effect:"fadeIn",threshold:0,container:i})}}),$("[data-frame-filter]").on("click",function(e){e.preventDefault();var t=$(this).data("filterTarget");$("[data-filter-input]").hide(),$(t).show(),$(this).closest(".btn-group").find("#current-filter-type").html($(this).data("filterType"))});var L={getUrlFromIframe:!0,setImageData:function(e,t){this.imageUrl=e.url,this.imageId=e.id;var a=new Image;a.onload=function(){v.setImage(this,function(){s(1),$("#offtwl__dimention-image-ratio").attr("data-locked","true");var i=(a.src.replace(/.*?:\/\//g,"/"),0),r=0;e.pixelWidth&&e.pixelHeight?(i=e.pixelWidth,r=e.pixelHeight,m=e.pixelWidth,h=e.pixelWidth):(i=a.width,r=a.height,m=e.pixelWidth,h=e.pixelWidth),p.printing.image.url=e.file,p.printing.image.id=parseInt(e.id),p.printing.image.name=e.name,p.printing.image.originalWidth=i,p.printing.image.originalHeight=r,p.printing.image.aspectRatio=parseFloat(a.width)/a.height,$("#offtwl__image-glance-name").html(e.name),$(".offtwl__image-description").fadeIn(150),$(".offtwl__upload-img-quality-holder").fadeIn(150),$("#upload-info-alert").fadeOut(150),$("[name=printing-type][value=luster-paper]").click(),$("a[href=#offtwl__print-info-tab]").click(),$("#preset-type-list").val("-"),"cm"==$("span.offtwl__dmnsn-inch-cm").html()?($("#offtwl__dmnsn-width").val(i/60),$("#offtwl__dmnsn-height").val((r/60).toFixed(1)).change()):($("#offtwl__dmnsn-width").val(i/60/2.54),$("#offtwl__dmnsn-height").val((r/60/2.54).toFixed(1)).change()),"function"==typeof t&&t()})},a.src=e.url},imageUrl:"",imageId:-1};$("#offtwl__dmnsn-width, #offtwl__dmnsn-height").on("input change",l),$("[name=printing-type]").on("change",function(){"none"!=$(this).val()?d(!0):d()});$("#fillet-no-mat-warning a").on("click",function(e){e.preventDefault(),$("[href=#offtwl__mats-tab]").click()}),$(".close").click(function(){$(this).closest(".alert").fadeOut(250)}),$("#hide-unstable-frames").on("click",function(){if($(this).prop("checked")){$(".unstable-frame").addClass("unstable-frame-hidden");var e="#"+$(".ui-tabs-active").last().attr("aria-controls");$(e).scroll()}else $(".unstable-frame-hidden").removeClass("unstable-frame-hidden")});var A=$("#canvas");if(A.length){var R=A[0],D=$("#cloned-canvas-holder");$("#canvas-frame-modal").on({"show.bs.modal":function(){var e=document.createElement("canvas");e.id="cloned-canvas";e.height=R.height;e.width=R.width;var t=e.getContext("2d");t.drawImage(R,0,0,e.width,e.height);D.append(e)},"hidden.bs.modal":function(){$("#cloned-canvas").remove()}})}$("#preset-type-list").on({change:function(){if("-"!=$(this).val()){var e=$("#offtwl__dmnsn-width"),t=$("#offtwl__dmnsn-height"),a=$("[data-value="+$(this).val()+"]"),i="inch"===T?"inch":"cm";e.val(a.data("width-"+i)),t.val(a.data("height-"+i)).change()}}}),$(window).on("unload",function(){p={imageWidth:10.16,imageHeight:15.24,printing:{paper:"none",image:{file:"",originalWidth:0,originalHeight:0,aspectRatio:0,name:""},price:0},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,frame:{frameCode:"224F",frameDepth:2,frameDesc:"Black",frameId:238,frameMaterial:"Wood",frameMax:120,frameMin:10,frameRate:2,frameRebate:.5,frameTile:"top_frame_238.jpg",frameWidth:2},slip:{frame:{frameId:""},price:0},fillet:{frame:{frameId:""},price:0},glass:void 0,backing:void 0,matboards:{mat1:{id:"",colorCode:"",top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0},mat2:{id:"",colorCode:"",top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0}},price:0,framePrice:0,glassPrice:0,backingPrice:0,quantity:0,productType:"custom-frame"},n(p.frame)}),$(".next-button").on("click",function(e){e.preventDefault(),$("#list-of-tabs > .ui-tabs-active").next().find("a").click()}),$(".prev-button").on("click",function(e){e.preventDefault(),$("#list-of-tabs > .ui-tabs-active").prev().find("a").click()}),$(".toggle-collapse").on("click",function(){f.call(this)});var B=$("#order-step-tabs");$(".offtwl__product-glance-link").on("click tap",function(e){var t=B.offset();e.preventDefault();var a=$(this).attr("data-href");$("html, body").animate({scrollTop:t.top}),$("[href=#"+a+"]").click()});var j=document.querySelector("#offtwl__form-matboard").querySelectorAll("input[type=number]");!function(){for(var e=0;e<j.length;e++)j[e].onblur=c}();function z(){var e=$(".upload-input-inside-btn");e.on({change:function(e){var a=$(this),i=e.target,r=a.val().split(".").pop().toLowerCase();if(-1==$.inArray(r,["gif","png","jpg","jpeg"]))alert("only 'gif','png','jpg','jpeg' are allowd!");else if(i.files&&i.files[0]){var o=new FileReader;o.onload=function(e){var a=URL.createObjectURL(i.files[0]);uploaded_img=new Image;uploaded_img.src=a;uploaded_img.onload=function(){if("undefined"!==typeof L){var e=document.createElement("canvas");e.width=this.naturalWidth;e.height=this.naturalHeight;e.getContext("2d").drawImage(this,0,0);t=o.result;var i=uploaded_img.width;var r=uploaded_img.height;a=a.replace(/^[a-z]{4}\:\/{2}[a-z]{1,}\:[0-9]{1,4}.(.*)/,"/$1");void 0;void 0;var n=a.substring(a.lastIndexOf("/")+1);L.setImageData({url:a,id:100,name:n,file:n,pixelWidth:i,pixelHeight:r});return}}};o.readAsDataURL(i.files[0])}}})}z();