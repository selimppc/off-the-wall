var e=function(){void 0;var e=false;var t;var a;var i=30;var r=Math.PI/180;var n=4*2.54;var o=6*2.54;var l=1200;var s=1200;var d=new PxLoader;var m="Off The Wall";var c=[];var f=[];var h={image:"http://www.offthewallframing.com.au/web/images/logo.png",imageType:"placeholder",width:n*i,height:o*i,setImage:function(e){this.image=e;this.width=e.width;this.height=e.height},setWidth:function(e){this.width=e},setHeight:function(e){this.height=e}};var u=function(e){if("undefined"===typeof e)e=0;var t=h.image;var a=t.width;var i=t.height;var n=document.createElement("canvas");n.width=i;n.height=a;var o=n.getContext("2d");o.save();o.translate(n.width/2,n.height/2);o.rotate(e*r);o.translate(-n.height/2,-n.width/2);o.drawImage(t,0,0);o.restore();h.setImage(n)};var p=function(e,t,a){if("undefined"===typeof e){h.image=void 0;h.imageType="placeholder";return}var i=new PxLoader;i.addImage(e.src);i.addCompletionListener(function(){var i=document.createElement("canvas");var r=i.getContext("2d");i.width=e.width;i.height=e.height;r.drawImage(e,0,0);h.setImage(i);h.setWidth(e.width);h.setHeight(e.height);if("undefined"!==typeof t)h.imageType=t;if("function"===typeof a)a()});i.start()};var g=function(i,r){try{t=document.getElementById(i);a=t.getContext("2d");a.fillStyle="#666";a.fillRect(0,0,t.width,t.height);e=true;if("undefined"!==typeof r){b(r);I()}return e}catch(t){e=false;throw new Error("ERROR: CANVAS NOT SET")}};var v=function(e,t){if(0==e)return c.length;var a={};a.width=a.top=a.bottom=a.left=a.right=e;a.src=t;a.type="frame";c.push(a);return c.length};var $=function(e,t,a,i,r){var n={};n.top=e;n.right=t;n.bottom=a;n.left=i;n.color=r;n.type="matboard";c.push(n);return c.length};var b=function(e){if("undefined"===typeof e)return c.length;var t={};t.width=parseFloat(e.width)||0;if(0==t.width)return c.length;t.top=parseFloat(e.left)||e.width;t.bottom=parseFloat(e.bottom)||e.width;t.left=parseFloat(e.left)||e.width;t.right=parseFloat(e.right)||e.width;t.src=e.src;t.type="frame";c.push(t);return c.length};var w=function(e){c.push(e)};var y=function(){c.pop()};var x=function(){c=[];return c.length};var _=function(){var e=document.createElement("CANVAS");var t=e.getContext("2d");e.width=h.width;e.height=h.height;void 0;void 0;var a="#EEE";t.fillStyle=a;t.fillRect(0,0,e.width,e.height);var i=38;t.save();t.fillStyle="#ff0000";t.font=i+"px Arial";t.baseline="top";t.textAlign="center";var r=m.split("\n");var n=15;for(var o=0;o<r.length;o++)t.fillText(r[o],e.width/2,.25*e.height+175+o*(n+i));t.restore();e=F(e);return e};var k=function(e){m=e};var F=function(e,t){if("undefined"==typeof t)t=.5;return e};var C=function(e){return e};var I=function(r){if(!e)throw new Error("Not Initialised");if("undefined"!==typeof r){if(r.inches){r.width*=2.54;r.height*=2.54}i=Math.min(l/r.width,s/r.height);h.setWidth(parseFloat(r.width)*i);h.setHeight(parseFloat(r.height)*i)}d=new PxLoader;if("picture"===h.imageType);else h.setImage(new _,"placeholder");function n(){var e=document.createElement("canvas");var i=e.getContext("2d");e.width=h.width;e.height=h.height;i.drawImage(h.image,0,0,e.width,e.height);var r=q(e,c);t.width=r.width;t.height=r.height;a.drawImage(r,0,0)}if(c.length>0){for(var o in c)if(c[o].src)if(f.indexOf(-1==c[o].src)){d.addImage(c[o].src);f.push(c[o].src)}d.addCompletionListener(function(e){n()});d.start()}else n();t.style.zoom="100%"==t.style.zoom?"100.0001%":"100%";return 1};var W=function(e,t){var a=parseFloat(t.left)*i*0,n=parseFloat(t.right)*i*0,o=parseFloat(t.top)*i*0,l=parseFloat(t.bottom)*i*0;var s=parseFloat(e.width)+a+n;var d=parseFloat(e.height)+o+l;var m=document.createElement("canvas");m.width=s;m.height=d;var c=m.getContext("2d");if("undefined"===typeof t["type"]||"matboard"===t["type"]){c.fillStyle=t.color;c.fillRect(0,0,m.width,m.height)}else{var f=new Image;f.src=t.src;f.onload=function(){var e=f.height;var a=parseFloat((i*t.width/e).toFixed(2));var n=parseInt(m.width/a);var o=parseInt(m.height/a);c.fillStyle=c.createPattern(f,"repeat-x");c.save();c.scale(a,a);c.translate(n,0);c.rotate(90*r);c.beginPath();c.moveTo(0,0);c.lineTo(f.height,f.height);c.lineTo(o-f.height,f.height);c.lineTo(o,0);c.lineTo(0,0);c.closePath();c.clip();c.fill();c.rotate(-90*r);c.translate(-n,0);c.restore();void 0}}c.drawImage(e,a,o);return m};var q=function(e,t){if(0==t.length)return e;if("undefined"!==typeof t[t.length-1]["type"]&&"matboard"==t[t.length-1]["type"])e=C(e);if(1==t.length){e=F(e,.4);return W(e,t[0])}else{e=F(e,.25);var a=W(e,t[t.length-1]);return q(a,t.slice(0,t.length-1))}};var T=function(e,t,a,i,r,n){r.textBaseline="bottom";r.font=.1*n.width+"px "+"Arial";r.fillText("Photo Frame",.5*n.width,.6*n.height);r.textBaseline="top";r.font=.175*n.width+"px "+"Arial";r.fillText(e+inchSymbol+separator+t+inchSymbol,.5*n.width,.61*n.height);r.font=.075*n.width+"px "+"Arial";r.fillText(a+cmSymbol+separator+i+cmSymbol,.5*n.width,.8*n.height)};var H=function(e){var a=250;var i=250;if("undefined"!==typeof e){a=e.width;i=e.height}var r=Math.min(a/t.width,i/t.height);var n=document.createElement("canvas");n.width=Math.floor(t.width*r);n.height=Math.floor(t.height*r);var o=n.getContext("2d");o.fillStyle="#FFFFFF";o.fillRect(0,0,n.width,n.height);o.scale(r,r);o.drawImage(t,0,0);return n};var S=function(e,t,i){var n="#2b2b2b";var o=0;if("v"===t[0])o=90;else o=0;var l=a;l.fillStyle=n;l.strokeStyle=n;l.save();l.scale(3,3);l.translate(e.x,e.y);l.rotate(o*r);l.font="8px Arial";l.textBaseline="middle";var s=l.measureText(i).width+5;l.save();l.beginPath();if(90===o){l.scale(-1,-1);l.fillText(i,5-s,0)}else l.fillText(i,3,0);l.closePath();l.fill();l.restore();l.save();l.beginPath();l.moveTo(s+50,-5);l.lineTo(s+60,0);l.lineTo(s+50,5);l.lineTo(s+50,-5);l.fill();l.closePath();l.restore();l.save();l.beginPath();l.lineWidth=2;l.moveTo(s+50,0);l.lineTo(s,0);l.stroke();l.closePath();l.restore();l.restore()};var P=function(){return c.length};return{clearFrames:x,addFrame:b,removeFrame:y,createFrame:v,createMat:$,setPlaceholderText:k,draw:I,init:g,setImage:p,rotateImage:u,addItem:w,thumb:H,frameCount:P}};if(!String.prototype.startsWith)String.prototype.startsWith=function(e,t){t=t||0;return this.indexOf(e,t)===t};if(!String.prototype.endsWith)String.prototype.endsWith=function(e,t){var a=this.toString();if("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>a.length)t=a.length;t-=e.length;var i=a.indexOf(e,t);return-1!==i&&i===t};var t=function(){var e=0,t=0,a=[],i=[],r=function(){var e=document.createElement("DIV");return e.id="cart-notification",e.style.opacity=1,e.style.position="fixed",e.style.right="30px",e.style.top="90px",e.style.zIndex=1e3,e.innerHTML='<div id="offtwl__popup-notification" class="row">                          <div class="offtwl__popup-notification-element offtwl__icon col-xs-5">                          <img src="/static/images/shopping-cart-white.png">                            </div>                            <div class="offtwl__popup-notification-element offtwl__message col-xs-7">                                    Item successfully added to cart!                            </div>                            </div>',$(e).on("click",function(){}),e},n=function(){var e=new r;$("body").append($(e)),$(e).fadeIn(150).delay(1e3).fadeOut(250)},o=function(t){t&&(e=t),$(i).each(function(){$(this).html(e)})},l=function(e){e&&(t=e),$(a).each(function(){$(this).html(t)})},s=function(){$("[data-cart-product-units]").each(function(e){a.push($(this))}),$("[data-cart-total-price]").each(function(e){i.push($(this))})};return{init:s,notifyQuantity:l,notifyTotalPrice:o,toast:n}};$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip();$(".input-row input, .input-row textarea").on("change input",function(){if(""==$(this).val()){$(this).prev().attr("data-empty-input",true);$(this).attr("data-empty-input",true)}else{$(this).prev().attr("data-empty-input",false);$(this).attr("data-empty-input",false)}}).on("focus",function(){$(this).prev().attr("data-sibling-focus",true)}).on("blur",function(){$(this).prev().attr("data-sibling-focus",false)}).each(function(){if($(this).attr("required"))$(this).prev("label").attr("data-input-required","")});$(".input-row input, .input-row textarea").change();var e=$('form[name="userupload"]');e.on("submit",function(e){var t=$("#canvas"),a=t[0],i=t.outerWidth(),r=t.outerHeight();var n=$("#offtwl__frameitCanvasImg");var o=document.createElement("canvas"),l=o.getContext("2d");o.width=i;o.height=r;l.drawImage(a,0,0,i,r);n.val(o.toDataURL())});$("[name=offtwl__imgwidth]").on("input",function(){setTimeout(i,750);if(a())$("#cart-button").prop("disabled",false);else $("#cart-button").prop("disabled","disabled")});$("[name=offtwl__imgheight]").on("input",function(){setTimeout(i,750);if(a())$("#cart-button").prop("disabled",false);else $("#cart-button").prop("disabled","disabled")});i()});function a(){var e=function e(){var t=$("[name=offtwl__imgwidth]").val();var a=$("[name=offtwl__imgheight]").val();return!(t<10||a<10||t>152||a>152||t>101.5&&a>101.5)}();if(e)$("#offtwl__measurement-alert").fadeOut(150);else $("#offtwl__measurement-alert").fadeIn(150);return e}function i(){w=$("[name=offtwl__imgwidth]").val();h=$("[name=offtwl__imgheight]").val();W=$("#file").val();var e=Number($("#offtwl__baseWidth").val()),t=Number($("#offtwl__baseHeight").val()),a=Number($("#offtwl__basePrice").val()),i=Number($("#offtwl__stepPrice").val());var r=w>e?(w-e)*i:0,n=h>t?(h-t)*i:0;var o=Number((a+r+n).toFixed(2));$("#offtwl__price_val").val(o);$("#price").html(o).data("totalPrice",o)}function r(e){return(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?"black":"white"}function n(){var e=document.querySelector("#offtwl__imgwidth"),t=document.querySelector("#offtwl__imgheight"),a=document.querySelector("#offtwl__dimensions-unit-selection input[name=offtwl__unit-type]:checked").value;e.value<0&&(e.value=1),t.value<0&&(t.value=1),"cm"==a?(e.value,t.value):(e.value>60&&(e.value=60),t.value>60&&(t.value=60));void 0}function o(){if("true"==$("#offtwl__image-ratio").attr("data-is-locked")){var e=v.printing.image.aspectRatio;"width"==$(this).attr("data-for")?$("#offtwl__imgheight").val(($(this).val()/e).toFixed(1)):$("#offtwl__imgwidth").val(($(this).val()*e).toFixed(1))}}function l(e){e.startsWith("108")?($('[name=number-of-mats][value="0"]').click(),$("[name=glass-type][value=no-glass]").click(),$("[name=backing-type][value=none]").click(),$("[name=slip][value=none]").click(),$(".remove-image").click(),$("[name=printing-type][value=none]").click(),$("[name=matt-canvas-printing-type][value=matt-canvas-none]").click(),$('#upload, [aria-controls="tab-mats"], [aria-controls="tab-glass-and-backing"], [aria-controls="tab-slips"], [aria-controls="tab-fillets"], [aria-controls="tab-printing"]').fadeOut(150)):($("[name=glass-type][value=clear-glass]").click(),"none"===$("[name=backing-type]:checked").val()&&$('[name=backing-type][value="adhesive-foamcore"]').click(),$('#upload, #show-more-tabs, [aria-controls="tab-mats"], [aria-controls="tab-glass-and-backing"], [aria-controls="tab-printing"]').fadeIn(150),$("#show-more-tabs").parent().fadeIn(150))}function s(e){$("#frame-detail-code").html(e.frameCode),$("#frame-detail-depth").html(e.frameDepth.toFixed(1)+" cm"),$("#frame-detail-width").html(e.frameWidth.toFixed(1)+" cm"),$("#frame-detail-rebate").html(e.frameRebate.toFixed(1)+" cm"),$("#frame-detail-colour").html(e.frameDesc),$("#frame-detail-material").html(e.frameMaterial);var t=$("#frame-detail-description");e.frameDescription?(t.html(e.frameDescription),t.parent().show()):t.parent().hide()}function d(){var e=p/300;if("cm"==$("span.inch-cm").html())var t=Math.min(e/($("#offtwl__imgwidth").val()/2.54)*100,100);else var t=Math.min(e/$("#offtwl__imgwidth").val()*100,100);t<=0?($("#print-quality-progress").css("width","100%"),$("#print-quality-progress").removeClass("progress-bar-danger progress-bar-good progress-bar-excellent progress-bar-warning"),$("#print-quality-progress").addClass("progress-bar-info"),$("#print-quality-text").html("No Image Detected")):t>0&&t<=25?($("#print-quality-progress").css("width",t+"%"),$("#print-quality-progress").removeClass("progress-bar-good progress-bar-excellent progress-bar-warning progress-bar-info"),$("#print-quality-progress").addClass("progress-bar-danger"),$("#print-quality-text").html("Poor")):t>25&&t<=40?($("#print-quality-progress").css("width",t+"%"),$("#print-quality-progress").removeClass("progress-bar-good progress-bar-excellent progress-bar-danger progress-bar-info"),$("#print-quality-progress").addClass("progress-bar-warning"),$("#print-quality-text").html("Not Bad")):t>40&&t<70?($("#print-quality-progress").css("width",t+"%"),$("#print-quality-progress").removeClass("progress-bar-warning progress-bar-danger progress-bar-excellent progress-bar-info"),$("#print-quality-progress").addClass("progress-bar-good"),$("#print-quality-text").html("Good")):t>70&&t<90?($("#print-quality-progress").css("width",t+"%"),$("#print-quality-progress").removeClass("progress-bar-warning progress-bar-danger progress-bar-excellent progress-bar-info"),$("#print-quality-progress").addClass("progress-bar-good"),$("#print-quality-text").html("Great")):($("#print-quality-progress").css("width",t+"%"),$("#print-quality-progress").removeClass("progress-bar-danger progress-bar-warning progress-bar-good progress-bar-info"),$("#print-quality-progress").addClass("progress-bar-excellent"),$("#print-quality-text").html("Excellent"))}function m(e){var t=$("#no-mdf-info");!0===e?($("[name=backing-type][value=adhesive-foamcore]").click(),$("[name=backing-type][value=MDF]").prop("disabled",!0).addClass("disabled").parent().addClass("disabled").find(".outer").addClass("disabled"),t.show()):($("[name=backing-type][value=MDF]").prop("disabled",!1).removeClass("disabled").parent().removeClass("disabled").find(".outer").removeClass("disabled"),t.hide())}function c(e){1==e?($("[name=printing-type]").prop("disabled",!1).addClass("disabled").parent().removeClass("disabled").find(".outer").removeClass("disabled"),m(!0)):($("[data-paper-type=none]").click(),$("[name=printing-type]").prop("disabled",!0).addClass("disabled").parent().addClass("disabled").find(".outer").addClass("disabled"),m(),$(".image-details").fadeOut(150),$(".print-quality-container").fadeOut(150),$("#upload-info-alert").fadeIn(150),v.printing={paper:"none",image:{url:"",originalWidth:0,originalHeight:0,aspectRatio:0,name:""},price:0},q.setImage(),$("#offtwl__image-ratio").attr("data-is-locked",!1),q.draw())}function f(){var e=$(this).find(".toggle-icon");e.hasClass("fa-plus")?e.removeClass("fa-plus").addClass("fa-minus"):e.removeClass("fa-minus").addClass("fa-plus")}function u(){var e=document.querySelector("[name=matboard-width-type]:checked").value,t=parseFloat(this.min),a=parseFloat(this.max),i=parseFloat(this.value),r=i;if(i<t?r=t:i>a&&(r=a),r!=i&&(this.value=r,"uniform"===e))for(var n=document.getElementById("fieldset-variable").querySelectorAll("input[type=number]"),o=0;o<n.length;o++)n[o].value=r;y.calc()}void 0;var p=0,g=0;$("#show-more-tabs").on("click tap",function(e){e.preventDefault(),$("#show-more-tabs").parent().fadeOut(50),$(".hidden-tabs").fadeIn(150),$("#ui-id-6").click(),$(".card-tab-list a").css({padding:"5px 5px","font-size":"1.3rem"})}),$("[id^=frame-tab]").each(function(){var e="#"+$(this).attr("id")+" img.lazy";$(e).lazyload({effect:"fadeIn",threshold:20,container:$("#"+$(this).attr("id"))})});var v={imageWidth:10.16,imageHeight:15.24,printing:{paper:"none",image:{file:"",originalWidth:0,originalHeight:0,aspectRatio:0,name:""},price:0},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,frame:{frameCode:"224F",frameDepth:2,frameDesc:"Black",frameId:238,frameMaterial:"Wood",frameMax:120,frameMin:10,frameRate:2,frameRebate:.5,frameTile:"",frameWidth:2},slip:{frame:{frameId:""},price:0},fillet:{frame:{frameId:""},price:0},glass:void 0,backing:void 0,matboards:{mat1:{id:"",colorCode:"",top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0},mat2:{id:"",colorCode:"",top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0}},price:0,discountedPrice:0,newDiscountedPrice:0,framePrice:0,glassPrice:0,backingPrice:0,quantity:0,productType:"custom-frame"};s(v.frame),$("#order-step-tabs").tabs(),$("#frame-category-tabs").tabs(),$("#frame-category-tabs").tabs("option","active",$('[href="#frame-tab-Blacks"]').parent().index());var b=function(){var e=$("#row-summary-discount-value"),t=$("#row-summary-discount-percent"),a=parseInt(t.data("discount-percentage")),i=a/100;function r(r,n){var o=r,l=(o*i).toFixed(4),s=o-l;if("number"===typeof s){t.html(a+"%");e.html(l)}v.newDiscountedPrice=s;v.discountedPrice=l;return s}var o,l=!1,s=[],d=[],m=$("#offtwl__imgwidth"),f=$("#offtwl__imgheight"),h=!1,u=!1,b=!0,w=!1,y=!1,x=!1,k=!1,F=!1,C=function(){if(l)return!0;$.ajax({type:"GET",url:"static/json/price-list.json",success:function(e){o=e,l=!0,z()},error:function(e,t,a){void 0}})},I=function(e,t){q.setImage(e,"picture",function(){$("#offtwl__preset-size-list").addClass("disabled").prop("disabled",!0),$(".ratio-lock.fa-lock").removeClass("hidden"),$(".ratio-lock.fa-unlock").addClass("hidden"),$("#offtwl__imgwidth").val((.015*e.width).toFixed(2)),$("#offtwl__imgheight").val((.015*e.height).toFixed(2)),t&&"function"==typeof t&&t(),z()})},W=function(){if(v.printing.paper=$("[name=printing-type]:checked").val(),v.glass=$("[name=glass-type]:checked").val(),v.backing=$("[name=backing-type]:checked").val(),w=$('[name="slip"][value="add"]').prop("checked")){var e=v.slip.frame.frameCode;""==v.slip.frame.frameId&&""!=e&&(v.slip.frame.frameId=$("[data-frame-code="+e+"]").data("frameId"))}else v.slip.frame.frameId="";if(y=$('[name="fillet"][value="add"]').prop("checked")){var t=v.fillet.frame.frameCode;""==v.fillet.frame.frameId&&""!=t&&(v.fillet.frame.frameId=$("[data-frame-code="+t+"]").data("frameId"))}else v.fillet.frame.frameId="";F="none"!=v.printing.paper},T=function(){var e=v,t="inch"==P;e.imageWidth=parseFloat(m.val()),e.imageHeight=parseFloat(f.val()),t&&(e.imageWidth*=2.54,e.imageHeight*=2.54),e.imageWidth=parseFloat(e.imageWidth).toFixed(2),e.imageHeight=parseFloat(e.imageHeight).toFixed(2),e.innerWidth=parseFloat(e.imageWidth),e.innerHeight=parseFloat(e.imageHeight);for(var a in e.matboards)e.innerWidth+=parseFloat(e.matboards[a].left)||0,e.innerWidth+=parseFloat(e.matboards[a].right)||0,e.innerHeight+=parseFloat(e.matboards[a].top)||0,e.innerHeight+=parseFloat(e.matboards[a].bottom)||0;y&&(e.innerWidth+=2*e.fillet.frame.frameWidth,e.innerHeight+=2*e.fillet.frame.frameWidth),e.innerWidth=parseFloat(e.innerWidth).toFixed(2),e.innerHeight=parseFloat(e.innerHeight).toFixed(2),e.outerWidth=(parseFloat(e.innerWidth)+2*parseFloat(e.frame.frameWidth)-2*parseFloat(e.frame.frameRebate)).toFixed(2),e.outerHeight=(parseFloat(e.innerHeight)+2*parseFloat(e.frame.frameWidth)-2*parseFloat(e.frame.frameRebate)).toFixed(2);var i=e.innerWidth>=10&&e.innerHeight>=10,r=e.innerWidth<=152.5&&e.innerHeight<=152.5,n=e.innerWidth<=152.5&&e.innerHeight<=101.6||e.innerWidth<=101.6&&e.innerHeight<=152.5;b=Math.max(e.innerWidth,e.innerHeight)<=e.frame.frameMax,$("#max-frame-length-error").html(e.frame.frameMax),h=i&&e.imageWidth<=152.5&&e.imageHeight<=152.5&&(e.imageWidth<=152.5&&e.imageHeight<=101.6||e.imageWidth<=101.6&&e.imageHeight<=152.5),u=i&&n&&r,_.debounce(function(){h&&!u?$("#mat1-dimensions-invalid, #mat2-dimensions-invalid").show(250):h&&$("#mat1-dimensions-invalid, #mat2-dimensions-invalid").hide(250),u?$("#dimension-warning").fadeOut(150):$("#dimension-warning").fadeIn(150),!b&&u?$("#larger-than-max-error").show(250):$("#larger-than-max-error").hide(250)},500)()},H=function(){if(!l)return!1;var e=void 0,t=void 0,a=void 0,i=!1,n=!1,s=parseFloat(v.imageWidth)+parseFloat(v.imageHeight),m=parseFloat(v.innerWidth)+parseFloat(v.innerHeight),c=m+4*(w?parseFloat(v.slip.frame.frameWidth):0);v.quantity=parseFloat($("#offtwl__product-quantity").val()||1);for(var f in o)if(!i&&f>=s&&(a=o[f],i=!0),!n&&f>=m&&(t=o[f],n=!0),f>=c){e=o[f];break}if(e)if(u&&b){$("#offtwl__addToCartButton").prop("disabled",!1);void 0;void 0;void 0;void 0;void 0;var h=v.framePrice=parseFloat(e.rate[v.frame.frameRate]),p=v.matboards.mat1.price=""!=x?t.top_mat:0,g=v.matboards.mat2.price=""!=k?t.middle_mat:0,_=v.fillet.price=y?a.rate[v.fillet.frame.frameRate]:0,C=v.slip.price=w?t.rate[v.slip.frame.frameRate]:0,I=v.glassPrice=parseFloat(t[v.glass])||0,W=v.backingPrice=parseFloat(t[v.backing])||0,q=v.printing.price=F?parseFloat(a[v.printing.paper]):0,T=h+p+g+_+C+I+W+q,H=(T*v.quantity).toFixed(2);v.price=H,$(d).each(function(){var e=r(H);void 0;$(this).html("$"+e)})}else $(d).each(function(){$(this).html("N/A")}),$("#offtwl__addToCartButton").prop("disabled",!0)},S=function(){var e={width:v.frame.frameWidth,src:"./images/frame_images/large/"+v.frame.frameTile};self.isFloat=v.frame.frameCode.startsWith("108"),q.addFrame(e)},M=function(){var e={width:v.slip.frame.frameWidth,src:"./images/frame_images/large/"+v.slip.frame.frameTile};q.addFrame(e)},E=function(){var e={width:v.fillet.frame.frameWidth,src:"./images/frame_images/large/"+v.fillet.frame.frameTile};q.addFrame(e)},L=function(){var e,t,a,i,r=v.matboards,n=parseInt(document.querySelector("[name=number-of-mats]:checked")&&document.querySelector("[name=number-of-mats]:checked").value),o=document.querySelector("[name=matboard-width-type]:checked")&&document.querySelector("[name=matboard-width-type]:checked").value;if(x=!1,k=!1,n>0){if(x=!0,"uniform"==o)e=t=a=i=document.getElementById("uniform-width").value;else"variable"==o&&(e=document.getElementById("dimensions-top").value,a=document.getElementById("dimensions-bottom").value,t=document.getElementById("dimensions-left").value,i=document.getElementById("dimensions-right").value);"inch"==P&&(e*=2.54,a*=2.54,t*=2.54,i*=2.54),r.mat1.top=e,r.mat1.bottom=a,r.mat1.left=t,r.mat1.right=i,q.createMat(e,i,a,t,"#"+r.mat1.colorCode),n>1&&(k=!0,e=t=a=i=document.getElementById("matboard-2-width").value,"inch"==P&&(e*=2.54,a*=2.54,t*=2.54,i*=2.54),r.mat2.top=e,r.mat2.bottom=a,r.mat2.left=t,r.mat2.right=i,q.createMat(e,i,a,t,"#"+r.mat2.colorCode))}for(var l=Object.keys(r),s=n;s<l.length;s++)r[l[s]]={id:"",colorCode:r[l[s]].colorCode,top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0}},O=function(){n(),q.draw({width:v.imageWidth,height:v.imageHeight})},D=function(){var e=parseFloat(parseFloat($("#offtwl__imgwidth").val()).toFixed(2)),t=parseFloat(parseFloat($("#offtwl__imgheight").val()).toFixed(2)),a=.12,i=.6;(e>=40||t>=40)&&(i=1,a=.39);var r="cm"===P?i:a,n=parseFloat(parseFloat(e-r).toFixed(2)),o=parseFloat(parseFloat(t-r).toFixed(2)),l=["Please choose mirror size & ","\n"," click to Add a frame to continue."].join(" ");q.setPlaceholderText(l)},A=function(){w?$("#row-summary-slip").fadeIn(100):$("#row-summary-slip").fadeOut(100),y?$("#row-summary-fillet").fadeIn(100):$("#row-summary-fillet").fadeOut(100),x?$("#row-summary-mat-top").fadeIn(100):$("#row-summary-mat-top").fadeOut(100),k?$("#row-summary-mat-bottom").fadeIn(100):$("#row-summary-mat-bottom").fadeOut(100),F?$("#row-summary-printing").fadeIn(100):$("#row-summary-printing").fadeOut(100);var e=new RegExp("-","g");$("#summary-frame").html(v.frame.frameCode),$("#summary-slip").html(v.slip.frame.frameCode),$("#summary-fillet").html(v.fillet.frame.frameCode),$("#summary-mat-top").html(v.matboards.mat1.matName),$("#summary-mat-bottom").html(v.matboards.mat2.matName),$("#summary-glass").html(v.glass?v.glass.replace(e," ").replace("glass",""):""),$("#summary-backing").html(v.backing?v.backing.replace(e," ").replace("glass",""):""),$("#summary-image-size").html(v.imageWidth+" x "+v.imageHeight+" cm"),$("#summary-glass-size").html(v.innerWidth+" x "+v.innerHeight+" cm"),$("#summary-outer-size").html(v.outerWidth+" x "+v.outerHeight+" cm"),$("#summary-printing").html(v.printing.paper),$("#summary-frame-price").html("$ "+v.framePrice.toFixed(2)),$("#summary-slip-price").html("$ "+v.slip.price.toFixed(2)),$("#summary-fillet-price").html("$ "+v.fillet.price.toFixed(2)),$("#summary-mat-top-price").html("$ "+v.matboards.mat1.price.toFixed(2)),$("#summary-mat-bottom-price").html("$ "+v.matboards.mat2.price.toFixed(2)),$("#summary-glass-price").html("$ "+v.glassPrice.toFixed(2)),$("#summary-backing-price").html("$ "+v.backingPrice.toFixed(2)),$("#summary-printing-price").html("$ "+v.printing.price.toFixed(2)),$("#error-current-selection-size").html($("#summary-glass-size").html())},R=function(e,t){var a=[];$('[id^="frame-tab"] [data-frame-code]').each(function(){a.push(this)});var i=_.filter(a,e,t);return _.sortBy(i,function(e){return e.dataset.frameWidth})},B=function(e,t){var a=function(t){return t.dataset.frameMax<e},i=R(a);$(".unstable-frame").removeClass("unstable-frame"),$(".unstable-frame-hidden").removeClass("unstable-frame-hidden"),!0===t?$(i).addClass("unstable-frame").addClass("unstable-frame-hidden"):$(i).addClass("unstable-frame")},z=function(){q.clearFrames(),W(),S(),w&&M(),L(),y&&E(),T(),B(Math.max(v.imageWidth,v.imageHeight),$("#hide-unstable-frames").prop("checked")),D(),O(),H(),A(),$(document.body).trigger("sticky_kit:recalc")},N=_.debounce(z,100,{leading:!0}),j=function(e){$(e).on("change input click",N),s.push($(e))},U=function(){return o};return $(document).ready(function(){c(1),$(".remove-image").on("click",function(){c(1),$(".ratio-lock.fa-lock").addClass("hidden"),$(".ratio-lock.fa-unlock").removeClass("hidden"),$("#offtwl__preset-size-list").removeClass("disabled").prop("disabled",!1),$("#print-quality-progress").css("width","100%"),$("#print-quality-progress").removeClass("progress-bar-danger progress-bar-good progress-bar-excellent progress-bar-warning"),$("#print-quality-progress").addClass("progress-bar-info"),$("#print-quality-text").html("No Image Detected"),p=0,g=0}),$("[data-calc-product]").each(function(e,t){s.push(t),$(t).on("change",N).on("input",N).on("click",function(){"SPAN"===$(this).prop("tagName")&&N()})}),$("[data-price-subscriber]").each(function(e,t){void 0;void 0;void 0;d.push(t)}),$(".modal").on("shown.bs.modal",function(){if($(window).width()<768){var e=window.innerHeight;$(".modal-body > iframe").css("height",e-130)}else $(this).find(".modal-body > iframe").css("height",.7*$(window).height());$(this).find("iframe").attr("src","gallery.php")})}),{init:C,addBroadcaster:j,setImage:I,prices:U,filter:R,calc:N}},y=new b;y.init(),$("[name=fillet][value=add]").parent().on("click",function(){1==$(this).children(":first").prop("disabled")&&$("#fillet-no-mat-warning").fadeIn()}),$("[name=fillet]").on("change",function(e){"add"==$("[name=fillet]:checked").val()&&(0==parseInt($("[name=number-of-mats]:checked").val())?($("#fillet-no-mat-warning").fadeIn(),$('[name=fillet][value="none"]').click()):$("#fillet-no-mat-warning").fadeOut(),""===v.fillet.frame.frameId&&$(".frame-thumb-container.fillet-frame").first().click())});var x="",k=v.matboards;document.getElementById("uniform-width")&&document.getElementById("uniform-width").addEventListener("input",function(){for(var e=document.querySelectorAll("#variable-width input[type=number]"),t=0;t<e.length;t++)e[t].value=this.value});for(var F=document.querySelectorAll("[name=matboard-width-type]"),C=0;C<F.length;C++)F[C].addEventListener("change",function(){switch(document.querySelector("[name=matboard-width-type]:checked").value){case"uniform":document.getElementById("uniform-width").disabled=!1,document.getElementById("variable-width").disabled=!0;break;case"variable":document.getElementById("uniform-width").disabled=!0,document.getElementById("variable-width").disabled=!1}});for(var I=document.querySelectorAll(".matboard-square"),W=0;W<I.length;W++)I[W].style.color=r(I[W].dataset.colorCode),I[W].addEventListener("click",function(e){k[this.dataset.matObject].id=this.dataset.matId,k[this.dataset.matObject].colorCode=this.dataset.colorCode,k[this.dataset.matObject].matCode=this.dataset.code,k[this.dataset.matObject].matName=this.dataset.name,x=this.dataset.colorCode;var t=document.querySelector('[data-slider-value="'+this.dataset.sliderValue+'"][data-selected="true"]');t&&(t.dataset.selected=!1,t.innerHTML=""),this.dataset.selected=!0,this.innerHTML='<span class="select-icon fa fa-check"></span>';var a=document.querySelector("[name=number-of-mats]:checked");parseInt(a.value)<1&&document.querySelector('[name="number-of-mats"][value="1"]').click()}),y.addBroadcaster(I[W]);$("[name=number-of-mats]").on("change",function(e){switch(parseInt($("[name=number-of-mats]:checked").val())){case 0:$("#fieldset-matboard-1").prop("disabled",!0),$("#fieldset-matboard-2").fadeOut(),$('[name=fillet][value="none"]').click(),$('[name=fillet][value="add"]').prop("disabled",!0),$("#fillet-no-mat-warning").fadeIn(),$(".matboard-square[data-selected=true]").html("").attr("data-selected",!1);break;case 1:$("#fieldset-matboard-1").prop("disabled",!1),$("#fieldset-matboard-2").fadeOut(),$("#fillet-no-mat-warning").fadeOut(),$('[name=fillet][value="add"]').prop("disabled",!1),""==k.mat1.id&&(""!=k.mat1.colorCode?$(".matboard-square[data-mat-object=mat1][data-color-code="+k.mat1.colorCode+"]").click():$(".matboard-square[data-mat-object=mat1]").first().click());break;case 2:$("#fieldset-matboard-1").prop("disabled",!1),$("#fieldset-matboard-2").fadeIn(),$("#fillet-no-mat-warning").fadeOut(),$('[name=fillet][value="add"]').prop("disabled",!1),""==k.mat1.id&&(""!=k.mat1.colorCode?$(".matboard-square[data-mat-object=mat1][data-color-code="+k.mat1.colorCode+"]").click():$(".matboard-square[data-mat-object=mat1]").first().click()),""==k.mat2.id&&(""!=k.mat2.colorCode?$(".matboard-square[data-mat-object=mat2][data-color-code="+k.mat2.colorCode+"]").click():$(".matboard-square[data-mat-object=mat2]").first().click())}});var q=new e,T=10.1,H=15.2,S=!1;$("#offtwl__dimensions-unit-selection input[name=offtwl__unit-type]:first ~ span").click();for(var P=document.querySelector("#offtwl__dimensions-unit-selection input[name=offtwl__unit-type]:checked").value,M=function(){var e=[];return{subscribe:function(t){e.push(t)},unsubscribe:function(t){for(;-1!=e.indexOf(val);)e.splice(C,1)},convertUnits:function(){for(var t="cm"==P?"inch":"cm",a=0;a<e.length;a++)switch(P){case"inch":if("unit-label"==e[a].dataset.type){e[a].innerHTML="cm";break}if("unit-value"==e[a].dataset.type){e[a].innerHTML=e[a].dataset.cmValue;break}if("standard-conversion"==e[a].dataset.type){e[a].innerHTML=(2.54*parseFloat(e[a].innerHTML)).toFixed(1);break}T=(2.54*parseFloat(T)).toFixed(1),H=(2.54*parseFloat(H)).toFixed(1),e[a].value=(2.54*e[a].value).toFixed(1),e[a].setAttribute("min",e[a].dataset.cmMin),e[a].setAttribute("max",e[a].dataset.cmMax),e[a].setAttribute("step",e[a].dataset.cmStep);break;case"cm":if("unit-label"==e[a].dataset.type){e[a].innerHTML="inch";break}if("unit-value"==e[a].dataset.type)e[a].innerHTML=e[a].dataset.inchValue;else if("standard-conversion"==e[a].dataset.type){e[a].innerHTML=(parseFloat(e[a].innerHTML)/2.54).toFixed(1);break}T=(parseFloat(T)/2.54).toFixed(1),H=(parseFloat(H)/2.54).toFixed(1),e[a].value=(e[a].value/2.54).toFixed(1),e[a].setAttribute("min",e[a].dataset.inchMin),e[a].setAttribute("max",e[a].dataset.inchMax),e[a].setAttribute("step",e[a].dataset.inchStep)}P=t}}},E=new M,L=document.querySelectorAll(".inch-cm"),C=0;C<L.length;C++)E.subscribe(L[C]);for(var O=document.querySelectorAll("#offtwl__dimensions-unit-selection input[type=radio]"),C=0;C<O.length;C++)O[C].addEventListener("change",function(){E.convertUnits()});$("#offtwl__imgwidth, #offtwl__imgheight").on("input change",o),q.init("canvas"),$(".frame-selection-container").mousewheel(function(e,t){this.scrollLeft-=45*t,e.preventDefault()}),$(".frame-thumb-container").each(function(){$(this).hasClass("slip-frame")?$(this).on("click",function(){$(".slip-thumb-selected").removeClass("slip-thumb-selected"),$(this).addClass("slip-thumb-selected"),v.slip.frame=$.extend(!0,{},$(this).data()),$('[name="slip"]').prop("checked")||$('[name="slip"][value="add"]').click()}):$(this).hasClass("fillet-frame")?$(this).on("click",function(){$(".fillet-thumb-selected").removeClass("fillet-thumb-selected"),$(this).addClass("fillet-thumb-selected"),v.fillet.frame=$.extend(!0,{},$(this).data()),$('[name="fillet"]').prop("checked")||$('[name="fillet"][value="add"]').click()}):$(this).on("click",function(){$(".frame-thumb-selected").removeClass("frame-thumb-selected"),$(this).addClass("frame-thumb-selected"),v.frame=$.extend(!0,{},$(this).data()),l(v.frame.frameCode),s($(this).data()),$("#thumb-selected").removeAttr("id"),$(this).attr("id","thumb-selected")}),y.addBroadcaster($(this))});for(var D=document.querySelectorAll("[name=offtwl__unit-type]"),C=0;C<D.length;C++)D[C].addEventListener("click",function(e){var t=document.querySelectorAll(".offtwl__data-inch"),a=document.querySelectorAll(".offtwl__data-cm");if("cm"==this.value)for(var i=0;i<t.length;i++)a[i].classList.remove("hidden-xs"),a[i].classList.remove("hidden-sm"),t[i].classList.add("hidden-xs"),t[i].classList.add("hidden-sm");else for(var i=0;i<t.length;i++)a[i].classList.add("hidden-xs"),a[i].classList.add("hidden-sm"),t[i].classList.remove("hidden-xs"),t[i].classList.remove("hidden-sm")});"undefined"==typeof headerCart&&(headerCart=new t,headerCart.init()),$("#offtwl__addToCartButton").on("click",function(){if("true"!==$(this).attr("data-disabled")){var e={product:v,thumb:q.thumb().toDataURL()},t=$(this);void 0;"true"!==t.attr("data-disabled")&&(t.attr("data-disabled","true"),$.ajax({type:"POST",url:"/custom-picture-frames/add-to-cart",data:e,success:function(e){headerCart.notifyQuantity(e.totalProducts),headerCart.notifyTotalPrice((e.totalPrice||0).toFixed(2)),headerCart.toast(),t.attr("data-disabled","false")},error:function(e,a,i){void 0,void 0,t.attr("data-disabled","false")}}))}}),$(window).on("resize",function(){}),$("#stick-wrapper").on("sticky_kit:bottom",function(e){$(this).parent().css("position","static")}).on("sticky_kit:unbottom",function(e){$(this).parent().css("position","relative")}),$('[id^="frame-tab"]').parent().on("click",function(e){var t=e.target;t.href&&-1!=t.href.indexOf("frame-tab-")&&(t.href.endsWith("#frame-tab-FloatforCanvas")?$("#float-frame-warning").slideDown(250):$("#float-frame-warning").slideUp(150))}),$("#frame-code-filter").on("input",function(){if(!($(this).val().length<1)){if(void 0==this.frameData){var e=[];$('[id^="frame-tab"]:not(#frame-tab-filter-results) [data-frame-code]').each(function(){e.push(this)}),this.frameData=e}$('a[href="#frame-tab-filter-results"].ui-tabs-anchor').parent().hasClass("ui-state-active")||$('a[href="#frame-tab-filter-results"].ui-tabs-anchor').click();var t=$(this).val().toUpperCase(),a=_.filter(this.frameData,function(e){return _.startsWith(e.dataset.frameCode.toUpperCase(),t)}),i=$("#frame-tab-filter-results");i.unbind(),i.empty(),i.mousewheel(function(e,t){this.scrollLeft-=45*t,e.preventDefault()}),$(a).each(function(){$(this).clone(!0).appendTo($("#frame-tab-filter-results"))}),$("#frame-tab-filter-results .lazy").lazyload({effect:"fadeIn",threshold:0,container:i})}}),$("#frame-rate-list").on("change",function(){var e=parseInt($(this).val());$('a[href="#frame-tab-filter-results"].ui-tabs-anchor').parent().hasClass("ui-state-active")||$('a[href="#frame-tab-filter-results"].ui-tabs-anchor').click();var t=y.filter(function(t){return e==t.dataset.frameRate}),a=$("#frame-tab-filter-results");a.unbind(),a.empty(),a.mousewheel(function(e,t){this.scrollLeft-=45*t,e.preventDefault()}),$(t).each(function(){$(this).clone(!0).appendTo($("#frame-tab-filter-results"))}),$("#frame-tab-filter-results .lazy").lazyload({effect:"fadeIn",threshold:0,container:a})}),$("[data-frame-filter]").on("click",function(e){e.preventDefault();var t=$(this).data("filterTarget");$("[data-filter-input]").hide(),$(t).show(),$(this).closest(".btn-group").find("#current-filter-type").html($(this).data("filterType"))});var A={getUrlFromIframe:!0,setImageData:function(e,t){this.imageUrl=e.url,this.imageId=e.id,$("#upload-image-modal").modal("hide");var a=new Image;a.onload=function(){y.setImage(this,function(){c(1),$("#offtwl__image-ratio").attr("data-is-locked","true");var i=(a.src.replace(/.*?:\/\//g,"/"),0),r=0;e.pixelWidth&&e.pixelHeight?(i=e.pixelWidth,r=e.pixelHeight,p=e.pixelWidth,g=e.pixelWidth):(i=a.width,r=a.height,p=e.pixelWidth,g=e.pixelWidth),v.printing.image.url=e.file,v.printing.image.id=parseInt(e.id),v.printing.image.name=e.name,v.printing.image.originalWidth=i,v.printing.image.originalHeight=r,v.printing.image.aspectRatio=parseFloat(a.width)/a.height,$("#image-summary-name").html(e.name),$(".image-details").fadeIn(150),$(".print-quality-container").fadeIn(150),$("#upload-info-alert").fadeOut(150),$("[name=printing-type][value=luster-paper]").click(),$("a[href=#tab-printing]").click(),$("#offtwl__preset-size-list").val("-"),"cm"==$("span.inch-cm").html()?($("#offtwl__imgwidth").val(i/60),$("#offtwl__imgheight").val((r/60).toFixed(1)).change()):($("#offtwl__imgwidth").val(i/60/2.54),$("#offtwl__imgheight").val((r/60/2.54).toFixed(1)).change()),"function"==typeof t&&t()})},a.src=e.url},imageUrl:"",imageId:-1};$("#offtwl__imgwidth, #offtwl__imgheight").on("input change",d),$("[name=printing-type]").on("change",function(){"none"!=$(this).val()?m(!0):m()});$("#fillet-no-mat-warning a").on("click",function(e){e.preventDefault(),$("[href=#tab-mats]").click()}),$(".close").click(function(){$(this).closest(".alert").fadeOut(250)}),$("#hide-unstable-frames").on("click",function(){if($(this).prop("checked")){$(".unstable-frame").addClass("unstable-frame-hidden");var e="#"+$(".ui-tabs-active").last().attr("aria-controls");$(e).scroll()}else $(".unstable-frame-hidden").removeClass("unstable-frame-hidden")});var R=$("#canvas");if(R.length){var B=R[0],z=$("#cloned-canvas-holder");$("#canvas-frame-modal").on({"show.bs.modal":function(){var e=document.createElement("canvas");e.id="cloned-canvas";e.height=B.height;e.width=B.width;var t=e.getContext("2d");t.drawImage(B,0,0,e.width,e.height);z.append(e)},"hidden.bs.modal":function(){$("#cloned-canvas").remove()}})}$("#offtwl__preset-size-list").on("change",function(){if("-"!=$(this).val()){var e=$("#offtwl__imgwidth"),t=$("#offtwl__imgheight"),a=$("[data-value="+$(this).val()+"]"),i="inch"===P?"inch":"cm";e.val(a.data("width-"+i)),t.val(a.data("height-"+i)).change()}}),$(window).on("unload",function(){v={imageWidth:10.16,imageHeight:15.24,printing:{paper:"none",image:{file:"",originalWidth:0,originalHeight:0,aspectRatio:0,name:""},price:0},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,frame:{frameCode:"224F",frameDepth:2,frameDesc:"Black",frameId:238,frameMaterial:"Wood",frameMax:120,frameMin:10,frameRate:2,frameRebate:.5,frameTile:"",frameWidth:2},slip:{frame:{frameId:""},price:0},fillet:{frame:{frameId:""},price:0},glass:void 0,backing:void 0,matboards:{mat1:{id:"",colorCode:"",top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0},mat2:{id:"",colorCode:"",top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0}},price:0,framePrice:0,glassPrice:0,backingPrice:0,quantity:0,productType:"custom-frame"},s(v.frame)}),$(".next-button").on("click",function(e){e.preventDefault(),$("#list-of-tabs > .ui-tabs-active").next().find("a").click()}),$(".prev-button").on("click",function(e){e.preventDefault(),$("#list-of-tabs > .ui-tabs-active").prev().find("a").click()}),$(".toggle-collapse").on("click",function(){f.call(this)});var N=$(window).width(),j=!1;$("#frame-details").collapse("hide"),$("#frame-details-icon").removeClass("fa-minus").addClass("fa-plus"),$("#frame-details").on("shown.bs.collapse",function(){j=!0}).on("hidden.bs.collapse",function(){j=!1}),$(window).on("load resize",function(){var e=$(window).width();e!==N&&($(this).width()<768&&j&&($("#frame-details").collapse("hide"),$("#frame-details-icon").removeClass("fa-minus").addClass("fa-plus"),j=!1),N=e)});var U=$("#order-step-tabs");$(".product-summary-link").on("click tap",function(e){var t=U.offset();e.preventDefault();var a=$(this).attr("data-href");$("html, body").animate({scrollTop:t.top}),$("[href=#"+a+"]").click()});var V=document.querySelector("#matboard-form")&&document.querySelector("#matboard-form").querySelectorAll("input[type=number]");!function(){if(null!=V)for(var e=0;e<V.length;e++)V[e].onblur=u}();function G(){var e=$(".upload-input-inside-btn");e.on("change",function(e){var t=$(this),a=e.target,i=t.val().split(".").pop().toLowerCase();if(-1==$.inArray(i,["gif","png","jpg","jpeg"]))alert("only 'gif','png','jpg','jpeg' are allowd!");else if(a.files&&a.files[0]){var r=new FileReader;r.onload=function(e){var t=URL.createObjectURL(a.files[0]);uploaded_img=new Image;uploaded_img.src=t;uploaded_img.onload=function(){if("undefined"!==typeof parent.gallery){var e=uploaded_img.width;var a=uploaded_img.height;t=t.replace(/^[a-z]{4}\:\/{2}[a-z]{1,}\:[0-9]{1,4}.(.*)/,"/$1");var i=t.substring(t.lastIndexOf("/")+1);parent.gallery.setImageData({url:t,id:100,name:i,file:i,pixelWidth:e,pixelHeight:a});return}}};r.readAsDataURL(a.files[0])}})}G();