var ajaxManager=$.manageAjax.create("cacheQueue",{queue:true,cacheResponse:true});var totalimgz=0;$(function(){$("#tabs").tabs();url="/?file=getframednew&offtwl__iproduct_id="+$("#offtwl__catzid").val()+"&icat_id="+$("#catzid").val()+"&offtwl__is_add_cart="+$("#offtwl__is_zadd_cart").val();$.get(url,function(t){$("a.zoom").fancybox({transitionIn:"elastic",transitionOut:"elastic",speedIn:"600",speedOut:"200",overlayShow:"true"});$("a.lrgimg").fancybox({type:"ajax",transitionIn:"elastic",transitionOut:"elastic",speedIn:"600",speedOut:"200",overlayShow:"true"});$("#add2cart").hide()});if(0!=$("#offtwl__glass_available").val())$("#glass_type").live("change",function(){update_price($(this).val(),"glassez")});$("#backing_type").live("change",function(){void 0;void 0;var t=this.children[this.selectedIndex].getAttribute("data-price");update_price(this.value,"backingz",t)});$("#add2cart").live("click",function(){if("1"==$("#offtwl__is_add_cart").val()&&""==$("#offtwl__iframe_id").val()){alert("Please select frame first.");return false}add2cart()});var t=$("body").first(),e=$(".offtwl__matboard-sqr");e.on("click",function(){t.css({background:"#"+$(this).attr("data-color-code")})});if(0==$("#offtwl__glass_available").val())$("#glass_type").val("NG");$("#offtwl__iframe_categori_id").val(50);$("#frame-it-mat-1-size-selector").val(5);$("#frame-it-mat-2-size-selector, #frame-it-mat-3-size-selector").val(1);var a=null;$(window).bind("resize",function(){if(a)clearTimeout(a);a=setTimeout(resizeUi,100)});resizeUi()});function offtwl__viewfull(){var t="/plain-mirror-add-to-cart?offtwl__sess="+$("#offtwl__sess").val()+"&show=1&a=p"+dourl()+"&prod_id="+$("#offtwl__iproduct_id").val();t+="&out=/"+$("#offtwl__sess").val()+"/prod_images/lrg_print_tmp_"+$("#offtwl__iproduct_id").val()+".jpg";$("#largerimg").find(".lrgimg").attr("href",canvasFrame.elem.toDataURL());return}function resizeUi(){}function selectframelist(t,e){var a=$("#offtwl__iframe_categori_id").val();var i;if("2"==e)i=$("#fcodeSel").val();else i="";$("#displayframes").html("Loading...");var r=$(t.target).find("option:selected").data("url");$.get(r+"?c="+a+"&code="+i,function(t){$("#displayframes").html(t);$("a.zoom").fancybox({transitionIn:"elastic",transitionOut:"elastic",speedIn:"600",speedOut:"200",overlayShow:"true"})});var l=$(".filtr_4");setTimeout(function(){var t=l.filtr($("#displayframes .frame"),{trigger:"keyup change",wait:0,checkItem:function(t,e){var a=true;l.each(function(t,i){var r=$(this);if(this.tagName.toLowerCase())if(-1===e.data.indexOf(this.value)&&"all"!=this.value)a=false});return a}})},100);return}function selectframelist2(){var t=parseFloat($("#inner_width").val());var e=parseFloat($("#inner_height").val());var a=0,i=0,r=0,l=0,s=0,o=0,m=0;if("none"!=$("#framez").css("display")){a=parseFloat($("#framez > .size").html());i=parseFloat($("#framez > .rebate").html())}if("none"!=$("#slipz").css("display"))r=parseFloat($("#slipz > .size").html());if("none"!=$("#matz1").css("display"))l=parseFloat($("#matz1 > .size").html());if("none"!=$("#matz2").css("display"))s=parseFloat($("#matz2 > .size").html());if("none"!=$("#matz3").css("display"))o=parseFloat($("#matz3 > .size").html());if("none"!=$("#filletz").css("display"))m+=parseFloat($("#filletz > .size").html());var f=t+2*(l+s+o+m);var n=e+2*(l+s+o+m);var i=$("#frate").val();if("all"!=i);else{var d=$(".filtr_4");var c=d.filtr($("#displayframes .frame"),{trigger:"keyup change",wait:0,checkItem:function(t,e){var a=true;d.each(function(t,i){var r=$(this);if(this.tagName.toLowerCase())if(-1===e.data.indexOf(this.value)&&"all"!=this.value)a=false});return a}})}return}$(function(){var t=$(".filtr_4");var e=t.filtr($("#displayframes .frame"),{trigger:"keyup change",wait:0,checkItem:function(e,a){var i=true;t.each(function(t,e){var r=$(this);if(this.tagName.toLowerCase())if(-1===a.data.indexOf(this.value)&&"all"!=this.value)i=false});return i}})});function domat(t,e){$("#bigmat .color").css("background-color","#"+t);$("#bigmat .name").html(e);return}function checkNoofMats(t){$("#frame-it-mat-size-selector").show();$("#totalmat").val(t);switch(t){case 0:$("#frame-it-mat-size-selector").hide();$("#matz1, #matz2, #matz3, #filletz").hide();$("#frame-it-mat-style-selector, #topmat").css("width","100%");$("#frame-it-mat-style-selector-2, #frame-it-mat-style-selector-3").hide();adjustdim();break;case 1:$("#matz1, #topmat").show();$("#middlemat, #bottommat, #matz2, #matz3").hide();$("#frame-it-mat-style-selector, #topmat").css("width","100%");$("#frame-it-mat-style-selector-2, #frame-it-mat-style-selector-3").hide();if(""==$("#topmat_id").val()||0==$("#topmat_id").val())$("#topmat_id").val(40);if(""==$("#topmatsize").val()||0==$("#topmatsize").val())$("#topmatsize").val(5);adjustmat(1,1);break;case 2:$("#matz1, #matz2").show();$("#bottommat, #matz3").hide();$("#frame-it-mat-style-selector, #frame-it-mat-style-selector-2, #topmat, #middlemat").css("width","50%").show();$("#frame-it-mat-style-selector-3").hide();if(""==$("#topmat_id").val()||0==$("#topmat_id").val())$("#topmat_id").val(40);if(""==$("#topmatsize").val()||0==$("#topmatsize").val())$("#topmatsize").val(5);if(""==$("#middlemat_id").val()||0==$("#middlemat_id").val())$("#middlemat_id").val(40);if(""==$("#middlematsize").val()||0==$("#middlematsize").val())$("#middlematsize").val(1);adjustmat(2,1);break;case 3:$("#matz1, #matz2, #matz3").show();$("#topmat, #middlemat, #bottommat, #frame-it-mat-style-selector, #frame-it-mat-style-selector-2, #frame-it-mat-style-selector-3").css("width","33%").show();if(""==$("#topmat_id").val()||0==$("#topmat_id").val())$("#topmat_id").val(40);if(""==$("#topmatsize").val()||0==$("#topmatsize").val())$("#topmatsize").val(5);if(""==$("#middlemat_id").val()||0==$("#middlemat_id").val())$("#middlemat_id").val(40);if(""==$("#middlematsize").val()||0==$("#middlematsize").val())$("#middlematsize").val(1);if(""==$("#bottommat_id").val()||0==$("#bottommat_id").val())$("#bottommat_id").val(40);if(""==$("#bottommatsize").val()||0==$("#bottommatsize").val())$("#bottommatsize").val(1);adjustmat(3,1);break;default:$("#frame-it-mat-size-selector").hide();$("#matz1, #matz2, #matz3").hide();$("#frame-it-mat-style-selector").css("width","100%");$("#frame-it-mat-style-selector-2, #frame-it-mat-style-selector-3").hide();adjustdim();break}return}function adjustmat(t,e){for(var a=0;a<=t;a++){$("#matz"+a+" > .size").html($("#frame-it-mat-"+a+"-size-selector").val());switch(t){case 1:$("#topmatsize").val($("#frame-it-mat-"+a+"-size-selector").val());break;case 2:$("#middlematsize").val($("#frame-it-mat-"+a+"-size-selector").val());break;case 3:$("#bottommatsize").val($("#frame-it-mat-"+a+"-size-selector").val());break}if(""==$("#matz"+a+" > .color").html())$("#matz"+a+" > .color").html("222222")}if(""!=e)adjustdim();return}function chnimg(t,e,a,i){$("input[name=matpos]").filter("[value="+i+"]").attr("checked",true);if(0==$("input[name=totalmat]:checked").val())$("#mat1chk").click();var r=$("input[name=matpos]:checked").val();$("#"+r+" > img").css("background-color","#"+t);$("#"+r+" > .name").html(a);adjustmats(a,t,e);return}function adjustmats(t,e,a){var i=$("input[name=matpos]:checked").val();switch(i){case"topmat":$("#matz1 > .code").html(t);$("#matz1 > .size").html($("#frame-it-mat-1-size-selector").val());$("#matz1 > .color").html(e);$("#topmat_id").val(a);$("#topmatsize").val($("#frame-it-mat-1-size-selector").val());$("#mat1").css("background-color","#"+e);$("#matz1").show();break;case"middlemat":$("#matz2 > .code").html(t);$("#matz2 > .size").html($("#frame-it-mat-2-size-selector").val());$("#matz2 > .color").html(e);$("#middlemat_id").val(a);$("#middlematsize").val($("#frame-it-mat-2-size-selector").val());$("#mat2").css("background-color","#"+e);$("#matz2").show();break;case"bottommat":$("#matz3 > .code").html(t);$("#matz3 > .size").html($("#frame-it-mat-3-size-selector").val());$("#matz3 > .color").html(e);$("#bottommat_id").val(a);$("#bottommatsize").val($("#frame-it-mat-3-size-selector").val());$("#mat3").css("background-color","#"+e);$("#matz3").show();break}return}function GowithMatDetails(){return}function removeframe(){$("#framez > .code, #framez > .size, #framez > .frate, #framez > .rebate, #framez > .fimg, #framez > .price").html("");$("#offtwl__selectedframeremove").html("");$("#fcodeSel").val("none");$("#offtwl__iframe_id").val("");$("#glass_type").val("NG");$("#backing_type").val("na");$("#framez, #glassez, #backingz").hide();adjustdim()}function removeslip(){$("#slipz > .code, #slipz > .size, #slipz > .frate, #slipz > .fimg, #slipz > .price").html("");$("#selectedslip").html("<strong>Selected Slip: </strong>none");$("#offtwl__islip_id").val("");$("#slipz").hide();adjustdim()}function removefillet(){$("#filletz > .code, #filletz > .size, #filletz > .frate, #filletz > .fimg, #filletz > .price").html("");$("#selectedfillet").html("<strong>Selected Fillet: </strong>none");$("#offtwl__ifillet_id").val("");$("#filletz").hide();adjustdim()}function SelectFrameCode(t){obj_value=t.value}function CanvasFrameImage(t){var e=400;var a=600;var i=10;void 0;var r=Math.PI/180;var l=$(t),s;var o=this;this.elem=t=l[0];this.ctx=s=t.getContext("2d");this.width=l.parent().find(".offtwl__framed-image-placeholder").first().outerWidth();this.height=l.parent().find(".offtwl__framed-image-placeholder").first().outerHeight();t.width=this.width;t.height=this.height;this.defaultFrame="images/frame_images/top_frame/top_frame_1227.jpg";this.setSize=function(e,a){this.width=e||l.parent().find(".offtwl__framed-image-placeholder").first().outerWidth();this.height=a||l.parent().find(".offtwl__framed-image-placeholder").first().outerHeight();t.width=this.width;t.height=this.height};this.clearCanvas=function(){this.ctx.clearRect(0,0,this.width,this.height)};this.drawFrame=function(t,e){var a=new Image;a.src=t;a.onload=function(){s.createPattern(a,"repeat-y")}};this.drawSlipImage=function(l){void 0;var s=parseFloat(l.left)*i,m=parseFloat(l.right)*i,f=parseFloat(l.top)*i,n=parseFloat(l.bottom)*i;void 0;void 0;void 0;void 0;var d=parseFloat(e)+s+m;var c=parseFloat(a)+f+n;void 0;void 0;var p=document.createElement("canvas");p.width=t.width;p.height=t.height;void 0;void 0;var h=p.getContext("2d");var $=new Image;$.src=l.src;$.onload=function(){void 0;var t=$.height;void 0;var e=parseFloat((i*l.width/t).toFixed(2));void 0;void 0;void 0;var a=parseInt(p.width/e);var m=parseInt(p.height/e);void 0;void 0;h.fillStyle=h.createPattern($,"repeat-x");h.translate(s,f);h.save();h.scale(e,e);h.fillRect(0,0,a-2*$.height,$.height);h.restore();h.save();h.scale(e,e);h.beginPath();h.translate(a,m-2*$.height);h.rotate(180*r);h.moveTo(0,0);h.fillRect(2*$.height,0,a-2*$.height,$.height);h.rotate(180*r);h.restore();h.save();h.scale(e,e);h.translate(0,m-2*$.height);h.rotate(-90*r);void 0;h.beginPath();h.moveTo(0,0);h.lineTo($.height,$.height);h.lineTo(m-2*$.height,$.height);h.lineTo(m-$.height,0);h.lineTo(0,0);h.closePath();h.clip();h.fill();h.rotate(90*r);h.translate(0,-m);h.restore();h.save();h.scale(e,e);h.translate(a-2*$.height,-$.height);h.rotate(90*r);h.beginPath();h.moveTo(0,0);h.lineTo($.height,$.height);h.lineTo(m-2*$.height,$.height);h.lineTo(m-$.height,0);h.lineTo(0,0);h.closePath();h.clip();h.fill();h.rotate(-90*r);h.translate(-a,0);h.restore();o.ctx.save();o.ctx.drawImage(p,0,0,p.width,p.height);o.ctx.restore();window.kk=h}};this.drawImage=function(l){var s=document.getElementById("offtwl__framedimg");void 0;o.setSize();void 0;i=6*l.frameWidth;void 0;var m=parseFloat(l.left)*i,f=parseFloat(l.right)*i,n=parseFloat(l.top)*i,d=parseFloat(l.bottom)*i;var c=parseFloat(e)+m+f;var p=parseFloat(a)+n+d;var h=document.createElement("canvas");h.width=t.width;h.height=t.height;var v=h.getContext("2d");var _=new Image;_.src=l.src;_.onload=function(){var t=_.height;var e=parseFloat((i*l.width/t).toFixed(2));var a=parseInt(h.width/e);var m=parseInt(h.height/e);v.fillStyle=v.createPattern(_,"repeat-x");v.save();v.scale(e,e);v.fillRect(0,0,a,_.height);v.restore();v.save();v.scale(e,e);v.beginPath();v.translate(a,m);v.rotate(180*r);v.moveTo(0,0);v.fillRect(0,0,a,_.height);v.rotate(180*r);v.restore();v.save();v.scale(e,e);v.translate(0,m);v.rotate(-90*r);v.beginPath();v.moveTo(0,0);v.lineTo(_.height,_.height);v.lineTo(m-_.height,_.height);v.lineTo(m,0);v.lineTo(0,0);v.closePath();v.clip();v.fill();v.rotate(90*r);v.translate(0,-m);v.restore();v.save();v.scale(e,e);v.translate(a,0);v.rotate(90*r);v.beginPath();v.moveTo(0,0);v.lineTo(_.height,_.height);v.lineTo(m-_.height,_.height);v.lineTo(m,0);v.lineTo(0,0);v.closePath();v.clip();v.fill();v.rotate(-90*r);v.translate(-a,0);v.restore();o.ctx.save();o.ctx.drawImage($("#offtwl__framedimg")[0],0,0,o.width,o.height);o.ctx.drawImage(h,0,0,s.width,s.height);o.ctx.restore()}}}var canvasFrame=new CanvasFrameImage("#offtwl__draw_frame");void 0;var offtwl__item_size=$("#offtwl__item_size"),frame=$(".frame");$.get("./static/json/price-list.json",function(t){var e=parseFloat(offtwl__item_size.attr("data-total-size")),a=[];void 0;$.each(t,function(t,e){a.push({index:parseFloat(t),item:e})});void 0;frame.each(function(){var t=$(this),i=t.find(".fprice").first(),r=t.find(".frate").first(),l=parseFloat(r.text());for(var s=0;s<a.length;s++)if(e<=a[s].index&&e<a[s+1].index){void 0;void 0;void 0;i.text(a[s].item.rate[l]);break}})});$(".selectframe").live("click",function(){var t=$(this),e=t.parents(".ui-tabs-inner-content-frame").first(),a=t.parents(".frame"),i=a.find("img"),r=i.attr("src"),l=i.attr("data-src-top"),s=parseFloat(a.find(".width").text().trim()),o=$("#frame_weight");o.val($(this).parent().parent().parent().find(".fweight").html());$("#offtwl__framedimg").addClass("activated");e.find(".frame.active").removeClass("active");a.addClass("active");var m=$("#offtwl__iframe_categori_id").val();var f=$(this).parent().parent().parent().find(".code").html();$("#framez > .code").html($(this).parent().parent().parent().find(".code").html());$("#offtwl__iframe_id").val($(this).parent().parent().parent().find(".id").html());$("#framez > .size").html($(this).parent().parent().parent().find(".width").html());$("#framez > .frate").html($(this).parent().parent().parent().find(".frate").html());$("#framez > .rebate").html($(this).parent().parent().parent().find(".rebate").html());$("#framez > .fimg").html($(this).parent().parent().parent().find(".fimg").html());$("#framez > .fmin").html($(this).parent().parent().parent().find(".fmin").html());$("#framez > .fmax").html($(this).parent().parent().parent().find(".fmax").html());$("#fcodeSel").val($(this).parent().parent().parent().find(".code").html());$("#offtwl__selectedframeremove").html("<a href='javascript: void(true);' onclick='removeframe();'>(remove)</a>");if("108"==f.substring(0,3)){$("#framez").show();$("#glass_type").val("NG");$("#glassez, #backingz").hide()}else{$("#framez").show();if(!("1510"==$("#catzid").val())){$("#glassez, #backingz").show();$("#glass_type").val("CG")}else{$("#glassez, #backingz").hide();$("#glass_type").val("NG")}}if(0==$("#offtwl__glass_available").val()){$("#glass_type").val("NG");$("#glassez").hide()}var n=document.getElementById("offtwl__glass_available");var d=document.getElementById("offtwl__iframe_categori_id");if($(d).length&&74==d.value){$("#glass_type").val("NG").change();n.value=0}adjustdim();canvasFrame.drawImage({src:l||r,width:1.4,top:1.4,bottom:1.4,left:1.4,right:1.4,frameWidth:s})});$(".selectslip").live("click",function(){if("none"!=$("#framez").css("display")){var t=$(this),e=t.parents(".frame"),a=e.find("img"),i=a.attr("src"),r=a.attr("data-src-top"),l=parseFloat(e.find(".width").text().trim());$("#slipz > .code").html($(this).parent().parent().parent().find(".code").html());$("#offtwl__islip_id").val($(this).parent().parent().parent().find(".id").html());$("#slipz > .size").html($(this).parent().parent().parent().find(".width").html());$("#slipz > .frate").html($(this).parent().parent().parent().find(".frate").html());$("#slipz > .fimg").html($(this).parent().parent().parent().find(".fimg").html());$("#selectedslip").html("<strong>Selected Slip: </strong>"+$(this).parent().parent().parent().find(".code").html()+" <a href='javascript: void(true);' onclick='removeslip();'>(remove)</a>");$("#slipz").show();adjustdim();void 0;void 0;canvasFrame.drawSlipImage({src:r,width:1.4,top:1.4,bottom:1.4,left:1.4,right:1.4})}else alert("Please select frame first.")});$(".selectfillet").live("click",function(){if("none"!=$("#matz1").css("display")){$("#filletz > .code").html($(this).parent().parent().parent().find(".code").html());$("#offtwl__ifillet_id").val($(this).parent().parent().parent().find(".id").html());$("#filletz > .size").html($(this).parent().parent().parent().find(".width").html());$("#filletz > .frate").html($(this).parent().parent().parent().find(".frate").html());$("#filletz > .fimg").html($(this).parent().parent().parent().find(".fimg").html());$("#selectedfillet").html("<strong>Selected Fillet: </strong>"+$(this).parent().parent().parent().find(".code").html()+" <a href='javascript: void(true);' onclick='removefillet();'>(remove)</a>");$("#filletz").show();adjustdim()}else alert("Please select at least One mat first.")});function loading(t){if("none"!=$("#framez").css("display")||"none"!=$("#slipz").css("display")||"none"!=$("#filletz").css("display"))$("#frame").block({message:'<img src="./static/images/loading.gif"><br /><br />'+t,css:{font:"13px Arial, Helvetica, sans-serif",background:"#333",color:"#fff",height:"60px",padding:"5px","text-align":"center",width:"130px"}});return}function offtwl__draw_frame(t,e){loading("Loading Frame(s)...");var a=0;if("none"!=$("#framez").css("display"))a++;if("none"!=$("#slipz").css("display"))a++;if("none"!=$("#filletz").css("display"))a++;totalimgz++;if(totalimgz==a)$("#frame").unblock();return}function fixdim(){void 0;var t=parseFloat($("#inner_width").val());var e=parseFloat($("#inner_height").val());var a=0,i=0,r=0,l=0,s=0,o=0;totalimgz=0;void 0;void 0;void 0;void 0;void 0;void 0;void 0;void 0;void 0;if("none"!=$("#framez").css("display"))a=parseFloat($("#framez > .size").html());if("none"!=$("#slipz").css("display"))i=parseFloat($("#slipz > .size").html());if("none"!=$("#matz1").css("display"))r=parseFloat($("#matz1 > .size").html());if("none"!=$("#matz2").css("display"))l=parseFloat($("#matz2 > .size").html());if("none"!=$("#matz3").css("display"))s=parseFloat($("#matz3 > .size").html());if("none"!=$("#filletz").css("display"))o=parseFloat($("#filletz > .size").html());var m=getImageArrayValues(t,e,a,r,l,s,i,o,600);void 0;var f=parseInt(m[0]),n=parseInt(m[1]),d=parseInt(m[2]),c=parseInt(m[3]),p=parseInt(m[4]),h=parseInt(m[5]),v=parseInt(m[6]),_=parseInt(m[7]),z=d,g=0;void 0;void 0;void 0;void 0;void 0;void 0;void 0;void 0;void 0;void 0;$("#frame").css("background","");$("#offtwl__framedimg, #mat1, #mat2, #mat3, #slip, #fillet").removeAttr("style");$(".price").html("<img src='./static/images/loading.gif' width='16' height='16' />");if(0!=d){var u="/frame-me.html?offtwl__sess="+$("#offtwl__sess").val()+"&id=frame&print_width="+(f+2*(c+p+h+v+_))+"&print_height="+(n+2*(c+p+h+v+_))+"&frame_width="+d+"&frame_code="+$("#framez > .fimg").html()+"&nc="+100001*Math.random();offtwl__draw_frame(u,"frame");$("#largerimg").show()}if(0!=i){var w="/frame-me.html?offtwl__sess="+$("#offtwl__sess").val()+"&id=slip&print_width="+(f+2*(p+h+v+_))+"&print_height="+(n+2*(p+h+v+_))+"&frame_width="+c+"&frame_code="+$("#slipz > .fimg").html()+"&nc="+100001*Math.random();offtwl__draw_frame(w,"slip");z=c}if(0!=r){f+=2;n+=2;if(0==i)$("#mat1").css("margin",d+"px 0 0 "+d+"px");else $("#mat1").css("margin",c-1+"px 0 0 "+(c-1)+"px");if(0==d)$("#mat1").css("position","");$("#offtwl__framedimg").css("border","1px solid white");z=p-1}if(0!=l){$("#offtwl__framedimg").css("border","1px solid white");z=h-1}if(0!=s){$("#offtwl__framedimg").css("border","1px solid white");z=v-1}if(0!=o){var b="/frame-me.html?offtwl__sess="+$("#offtwl__sess").val()+"&id=fillet&print_width="+f+"&print_height="+n+"&frame_width="+_+"&frame_code="+$("#filletz > .fimg").html()+"&nc="+100001*Math.random();if(0!=s)$("#fillet").css("margin",v+"px 0 0 "+v+"px");else if(0!=l)$("#fillet").css("margin",h+"px 0 0 "+h+"px");else $("#fillet").css("margin",p+"px 0 0 "+p+"px");$("#offtwl__framedimg").css({border:"0"});if(0==d)$("#frame-it-frame-loader").fadeTo("slow",0);offtwl__draw_frame(b,"fillet");z=_}void 0;void 0;void 0;void 0;void 0;void 0;void 0;void 0;void 0;void 0;void 0;doprice();return}function update_price(t,e,a){total=$("#totprice").html();total=parseFloat(total.replace("AU ",""));pricenow=$("#"+e+" > .price").html();pricenow=parseFloat(pricenow.replace("AU ",""));t=t.toLowerCase();var i;if(a)i=parseFloat(a);else i=parseFloat($("#"+t).val());void 0;void 0;var r=parseFloat(total)-parseFloat(pricenow)+parseFloat(i);$("#total_price_amount").val(r.formatMoney(2,".",","));$("#totprice").html("AU "+r.formatMoney(2,".",","));$("#"+e+" > .price").html("AU "+i.formatMoney(2,".",","))}function doprice(){void 0;var t=$("#displayframes"),e=t.find(".active"),a=Number(parseFloat(e.find(".fprice").first().html()));void 0;void 0;var i="static/json/gcp.js?a=p"+dourl();ajaxManager.add({url:i,success:function(t){void 0;p=t.split("|");var e=0,i=0,r=0,l=0,s=0,o=0,m=0,f=0;if("none"!=$("#framez").css("display"))e=parseFloat(a);if("none"!=$("#slipz").css("display"))i=parseFloat(p[1]);if("1510"==$("#catzid").val()){e*=parseFloat($("#offtwl__csrate").val());i*=parseFloat($("#offtwl__csrate").val())}var n=0;switch($("#glass_type").val()){case"NG":n=0;break;case"CG":n=p[2];break;case"NRG":n=p[3];break;case"UVG":n=p[4];break;case"PPG":n=p[5];break;case"UVRC":n=p[12];break}var d=0;switch($("#backing_type").val()){case"na":d="0.00";break;case"sa3":d=p[8];void 0;break;case"nsa3":d=p[9];break;case"sa5":d=p[10];break;case"nsa5":d=p[11];break}$("#ng").val(0);$("#cg").val(p[2]);$("#nrg").val(p[3]);$("#uvg").val(p[4]);$("#ppg").val(p[5]);$("#uvrc").val(p[12]);$("#na").val("0.00");$("#sa3").val(p[8]);$("#nsa3").val(p[9]);$("#sa5").val(p[10]);$("#nsa5").val(p[11]);if("none"!=$("#glassez").css("display"))r=n;if("none"!=$("#backingz").css("display"))m=d;if("none"!=$("#matz1").css("display"))l=p[6];if("none"!=$("#matz2").css("display"))s=p[6];if("none"!=$("#matz3").css("display"))o=p[6];if("none"!=$("#filletz").css("display"))f=p[7];if("1510"==$("#catzid").val()){r=0;m=0}$("#framez > .price").html("AU "+rounder(parseFloat(e)).toFixed(2));$("#glassez > .price").html("AU "+rounder(parseFloat(r)).toFixed(2));$("#backingz > .price").html("AU "+rounder(parseFloat(m)).toFixed(2));$("#slipz > .price").html("AU "+rounder(parseFloat(i)).toFixed(2));$("#matz1 > .price").html("AU "+rounder(parseFloat(l)).toFixed(2));$("#matz2 > .price").html("AU "+rounder(parseFloat(s)).toFixed(2));$("#matz3 > .price").html("AU "+rounder(parseFloat(o)).toFixed(2));$("#filletz > .price").html("AU "+rounder(parseFloat(f)).toFixed(2));var c=parseFloat($("#original_price").val())+rounder(parseFloat(e))+rounder(parseFloat(i))+rounder(parseFloat(r))+rounder(parseFloat(m))+rounder(parseFloat(l))+rounder(parseFloat(s))+rounder(parseFloat(o))+rounder(parseFloat(f));if("1510"==$("#catzid").val())c=rounder(e+i);$("#total_price_amount").val(c.formatMoney(2,".",","));$("#totprice").html("AU "+c.formatMoney(2,".",","))}})}function rounder(t){return Math.ceil(20*t)/20}function adjustdim(){var t=parseFloat($("#inner_width").val());var e=parseFloat($("#inner_height").val());var a=0,i=0,r=0,l=0,s=0,o=0,m=0;$("#add2cart").show();if("none"!=$("#framez").css("display")){a=parseFloat($("#framez > .size").html());i=parseFloat($("#framez > .rebate").html())}if("none"!=$("#slipz").css("display"))r=parseFloat($("#slipz > .size").html());if("none"!=$("#matz1").css("display"))l=parseFloat($("#matz1 > .size").html());if("none"!=$("#matz2").css("display"))s=parseFloat($("#matz2 > .size").html());if("none"!=$("#matz3").css("display"))o=parseFloat($("#matz3 > .size").html());if("none"!=$("#filletz").css("display"))m+=parseFloat($("#filletz > .size").html());var f=t+2*(a-i+r+l+s+o+m);var n=e+2*(a-i+r+l+s+o+m);var d=t+2*(l+s+o+m);var c=e+2*(l+s+o+m);$("#final_width").val(f);$("#final_height").val(n);$("#offtwl__prodinfo").html("Finished Product Approx. Size:  "+roundNumber(f)+" x "+roundNumber(n)+" cm - Internal Size ("+roundNumber(d)+" x "+roundNumber(c)+" cm)");$("#offtwl__prodzinfo").show();$("#offtwl__prodzerror").hide();if(0!=l){var p=check_mat(d,c);if(""!=p){$("#frame-it-frame-loader").hide();$("#offtwl__prodzinfo").hide();$("#offtwl__prodzerror").find(".msg").html(p);$("#offtwl__prodzerror").show();return}}if(0!=a&&0==r){var h=parseFloat($("#framez > .fmin").html());var v=parseFloat($("#framez > .fmax").html());var _=check_frame(h,v,d,c);if(""!=_){$("#frame-it-frame-loader").hide();$("#offtwl__prodzinfo").hide();$("#offtwl__prodzerror").find(".msg").html(_);$("#offtwl__prodzerror").show();return}}fixdim();return}function check_mat(t,e){var a="";if(t>152||e>152||t>101.5&&e>101.5)a="Print too large to be matted.";return a}function check_frame(t,e,a,i){var r="";if(a>e)r="This frame is NOT strong enough for sizes over ("+e+" cm)<br />Please adjust size.";if(i>e)r="This frame is NOT strong enough for  sizes over ("+e+" cm)<br />Please adjust size.";if(a<t)r="We can not cut frames under ("+t+" cm) .<br />Please either add a mat or adjust the size to minimum of 10cm.";if(i<t)r="We can not cut frames under ("+t+" cm) .<br />Please either add a mat or adjust the size to minimum of 10cm.";return r}function reload_frames(t,e){$("#tabs").tabs().tabs("select",0);var a=$("#offtwl__iframe_categori_id").val();$("#displayframes").html("Loading...");$("#displayframes").load("http://localhost/photo-frame-application/load-frame.html?c="+a+"&fmax="+t+"&fmin="+e);return}function add2cart(){$("#frame-it-frame-loader").html('<img src="./static/images/loader.gif"><br />Adding to Cart...');loading("Adding to Cart");if(0==$("#offtwl__glass_available").val())o="NG";if("1510"==$("#catzid").val()){e=0;t="nb";o="NG";gp=0}else{var t=$("#backing_type").val(),e=$("#backingz > .price").html();e=e.replace("AU ","")}var a="newaddtocart",i="addtocart",r=$("#offtwl__iproduct_id").val(),l=$("#icat_id").val();var s=$("#offtwl__iframe_id").val(),o=$("#glass_type").val(),m=$("#totalmat").val();var f=$("#final_width").val(),n=$("#final_height").val();var d=$("#framez > .code").html(),c=$("#slipz > .code").html(),p=$("#filletz > .code").html();var h="",v="",_="",z="",g="",u="";if("none"!=$("#matz1").css("display")){h=$("#topmat_id").val();v=$("#topmatsize").val()}if("none"!=$("#matz2").css("display")){_=$("#middlemat_id").val();z=$("#middlematsize").val()}if("none"!=$("#matz3").css("display")){g=$("#bottommat_id").val();u=$("#bottommatsize").val()}var w="/plain-mirror-add-to-cart?a=p"+"&product_type="+$("#product_type").val()+"&total_price_amount="+$("#total_price_amount").val()+"&frame_weight="+$("#frame_weight").val();w+="&original_price="+$("#original_price").val()+"&frame_code="+$("#framez").find(".code").text()+"&frame_price="+$("#framez").find(".price").text();w+="&backing_type="+$("#backing_type").val()+"&backing_type_price="+parseFloat($("#backing_type")[0].children[$("#backing_type")[0].selectedIndex].getAttribute("data-price"));var b={'_token':$("#csrf_token").val(),a:"p",product_type:$("#product_type").val(),total_price_amount:$("#total_price_amount").val(),original_price:$("#backing_type").val(),frame_code:$("#framez").find(".code").text(),frame_price:$("#framez").find(".price").text(),backing_type:$("#backing_type").val(),backing_type_price:parseFloat($("#backing_type")[0].children[$("#backing_type")[0].selectedIndex].getAttribute("data-price")),photo:canvasFrame.elem.toDataURL("image/jpeg",1),width:$("#inner_width").val(),height:$("#inner_height").val(),frame_weight:$("#frame_weight").val()};var y=document.getElementById("product_type");var F="";if(y)F="&product_type="+y.value;$.ajax({method:"POST",url:"./plain-mirror-add-to-cart",data:b,success:function(w){void 0;var b="/index.php?file="+a+"&action="+i+"&offtwl__iproduct_id="+r+"&icat_id="+l+"&offtwl__iframe_id="+s;b+="&glass_type="+o+"&totalmat="+m+"&topmat_id="+h+"&topmatsize="+v;b+="&middlemat_id="+_+"&middlematsize="+z+"&bottommat_id="+g;b+="&bottommatsize="+u+"&fwidth="+f+"&fheight="+n+"&key_id=&fcode="+d+"&b="+t+"&bp="+e;b+="&swid="+$("#slipz > .size").html()+"&offtwl__islip_id="+$("#offtwl__islip_id").val()+"&scode="+c;b+="&fiwid="+$("#filletz > .size").html()+"&offtwl__ifillet_id="+$("#offtwl__ifillet_id").val()+"&ficode="+p;b+=F;window.location="mycart"}})}function dourl(){var t=parseFloat($("#inner_width").val());var e=parseFloat($("#inner_height").val());var a=0,i=0,r=0,l=0,s=0,o=0,m=0,f=0,n=0,d=0;if("none"!=$("#framez").css("display")){a=parseFloat($("#framez > .size").html());i=parseFloat($("#framez > .frate").html())}if("none"!=$("#slipz").css("display")){l=parseFloat($("#slipz > .size").html());s=parseFloat($("#slipz > .frate").html())}if("none"!=$("#matz1").css("display"))o=parseFloat($("#matz1 > .size").html());if("none"!=$("#matz2").css("display"))m=parseFloat($("#matz2 > .size").html());if("none"!=$("#matz3").css("display"))f=parseFloat($("#matz3 > .size").html());if("none"!=$("#filletz").css("display")){n=parseFloat($("#filletz > .size").html());d=parseFloat($("#filletz > .frate").html())}var c="&print_width="+t+"&print_height="+e;c+="&frame_width="+a+"&slw="+l+"&fiw="+n;c+="&frame_code="+$("#framez > .fimg").html()+"&sl="+$("#slipz > .fimg").html()+"&fi="+$("#filletz > .fimg").html();c+="&c1="+$("#matz1 > .color").html()+"&c2="+$("#matz2 > .color").html()+"&c3="+$("#matz3 > .color").html();c+="&mat1="+o+"&mat2="+m+"&mat3="+f;c+="&frate="+i+"&srate="+s+"&filrate="+d+"&img="+$("#original_image").val();return c}function getImageArrayValues(t,e,a,i,r,l,s,o,m){var f=e;var n=t;if(t>e){f=t;n=e}ref_pt=m/(f+2*(a+o+s+i+r+l));fr_pix=a*ref_pt;fillet_pix=o*ref_pt;slip_pix=s*ref_pt;mat_1_pix=i*ref_pt;mat_2_pix=r*ref_pt;mat_3_pix=l*ref_pt;tot_1=2*(fr_pix+slip_pix+fillet_pix+mat_1_pix+mat_2_pix+mat_3_pix);higher_size=m-tot_1;lower_size=ref_pt*n;if(t==e){wid=higher_size;hei=higher_size}else if(t>e){wid=higher_size;hei=lower_size}else{wid=lower_size;hei=higher_size}return Array(parseInt(wid),parseInt(hei),parseInt(fr_pix),parseInt(slip_pix),parseInt(mat_1_pix),parseInt(mat_2_pix),parseInt(mat_3_pix),parseInt(fillet_pix))}Number.prototype.formatMoney=function(t,e,a){var i=this,t=isNaN(t=Math.abs(t))?2:t,e=void 0==e?",":e,a=void 0==a?".":a,r=i<0?"-":"",l=parseInt(i=Math.abs(+i||0).toFixed(t))+"",s=(s=l.length)>3?s%3:0;return r+(s?l.substr(0,s)+a:"")+l.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+a)+(t?e+Math.abs(i-l).toFixed(t).slice(2):"")};function roundNumber(t){return Math.round(t*Math.pow(10,1))/Math.pow(10,1)}function offtwl__editme(){alert("Sumer");$("#offtwl__editholder").show();$("#offtwl__editbtn").hide();$("#newwidth").val($("#inner_width").val());$("#newheight").val($("#inner_height").val())}function offtwl__cancelme(){$("#offtwl__editholder").hide();$("#offtwl__editbtn").show()}function offtwl__submit_new(){var t=$("#newwidth").val();var e=$("#newheight").val();if(t<10||e<10||t>244||e>244||t>122&&e>122){alert("Minimum size: 10x10 cm  ||  Maximum size: 244x122 || Or 122x244 cm.");return false}if(""!=t&&""!=e){$("#inner_width").val($("#newwidth").val());$("#inner_height").val($("#newheight").val());$("#final_width").val($("#newwidth").val());$("#final_height").val($("#newheight").val());$("#offtwl__item_size").html("Product Size: "+t+" x "+e+" cm");$("#offtwl__editholder").hide();$("#offtwl__editbtn").show();adjustdim()}else alert("Please provide the new dimensions.")}var selectFrameContainer=$(".offtwl__select-frame-container");selectFrameContainer.mCustomScrollbar({axis:"x",theme:"dark-3",advanced:{autoExpandHorizontalScroll:true},mouseWheel:{scrollAmount:150}});