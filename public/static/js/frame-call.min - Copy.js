var e=function(){var e=false;var t;var a;var i=30;var o=Math.PI/180;var r=4*2.54;var n=6*2.54;var l=1200;var d=1200;var s=new PxLoader;var f="Off The Wall";var c=[];var m=[];var h={image:"http://www.offthewallframing.com.au/web/images/logo.png",imageType:"placeholder",width:r*i,height:n*i,setImage:function(e){this.image=e;this.width=e.width;this.height=e.height},setWidth:function(e){this.width=e},setHeight:function(e){this.height=e}};var p=function(e){if("undefined"===typeof e)e=0;var t=h.image;var a=t.width;var i=t.height;var r=document.createElement("canvas");r.width=i;r.height=a;var n=r.getContext("2d");n.save();n.translate(r.width/2,r.height/2);n.rotate(e*o);n.translate(-r.height/2,-r.width/2);n.drawImage(t,0,0);n.restore();h.setImage(r)};var u=function(e,t,a){if("undefined"===typeof e){h.image=void 0;h.imageType="placeholder";return}var i=new PxLoader;i.addImage(e.src);i.addCompletionListener(function(){var i=document.createElement("canvas");var o=i.getContext("2d");i.width=e.width;i.height=e.height;o.drawImage(e,0,0);h.setImage(i);h.setWidth(e.width);h.setHeight(e.height);if("undefined"!==typeof t)h.imageType=t;if("function"===typeof a)a()});i.start()};var g=function(i,o){try{t=document.getElementById(i);a=t.getContext("2d");a.fillStyle="#666";a.fillRect(0,0,t.width,t.height);e=true;if("undefined"!==typeof o){v(o);I()}return e}catch(t){e=false;throw new Error("ERROR: CANVAS NOT SET")}};var w=function(e,t){if(0===e)return c.length;var a={};a.width=a.top=a.bottom=a.left=a.right=e;a.src=t;a.type="frame";c.push(a);return c.length};var _=function(e,t,a,i,o){var r={};r.top=e;r.right=t;r.bottom=a;r.left=i;r.color=o;r.type="matboard";c.push(r);return c.length};var v=function(e){if("undefined"===typeof e)return c.length;var t={};t.width=parseFloat(e.width)||0;if(0==t.width)return c.length;t.top=parseFloat(e.left)||e.width;t.bottom=parseFloat(e.bottom)||e.width;t.left=parseFloat(e.left)||e.width;t.right=parseFloat(e.right)||e.width;t.src=e.src;t.type="frame";c.push(t);return c.length};var b=function(e){c.push(e)};var $=function(){c.pop()};var y=function(){c=[];return c.length};var k=function(){var e=document.createElement("CANVAS");var t=e.getContext("2d");e.width=h.width;e.height=h.height;var a="#EEE";t.fillStyle=a;t.fillRect(0,0,e.width,e.height);t.save();t.translate(e.width/2-75,.25*e.height-25);t.fillStyle="#2b2b2b";t.fillRect(0,0,100,100);t.shadowColor="rgba(1,1,1,0)";t.strokeStyle=a;t.lineWidth=5;t.strokeRect(0,0,100,100);t.fillStyle="#2b2b2b";t.shadowColor="rgba(1,1,1,0.25)";t.fillRect(50,50,75,75);t.shadowColor="rgba(1,1,1,0)";t.strokeRect(50,50,75,75);t.fillStyle="#2b2b2b";t.shadowColor="rgba(1,1,1,0.25)";t.fillRect(100,100,50,50);t.shadowColor="rgba(1,1,1,0)";t.strokeRect(100,100,50,50);t.restore();var i=45;t.save();t.fillStyle="#2b2b2b";t.font=i+"px Arial";t.baseline="top";t.textAlign="center";var o=f.split("\n");var r=15;for(var n=0;n<o.length;n++)t.fillText(o[n],e.width/2,.25*e.height+175+n*(r+i));t.restore();e=x(e);return e};var C=function(e){f=e};var x=function(e,t){if("undefined"==typeof t)t=.5;var a=e.getContext("2d");a.save();a.shadowBlur=20;a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowColor="rgba(1,1,1,"+t+")";a.lineWidth=20;var i=a.lineWidth/2;a.strokeRect(0-i,0-i,e.width+2*i,e.height+2*i);a.restore();return e};var F=function(e){var t=e.getContext("2d");t.save();t.strokeStyle="white";t.lineWidth=6;var a=t.lineWidth/2;t.strokeRect(0,0,e.width,e.height);t.restore();return e};var I=function(o){if(!e)throw new Error("Not Initialised");if("undefined"!==typeof o){if(o.inches){o.width*=2.54;o.height*=2.54}i=Math.min(l/o.width,d/o.height);h.setWidth(parseFloat(o.width)*i);h.setHeight(parseFloat(o.height)*i)}s=new PxLoader;if("picture"===h.imageType);else h.setImage(new k,"placeholder");function r(){var e=document.createElement("canvas");var i=e.getContext("2d");e.width=h.width;e.height=h.height;i.drawImage(h.image,0,0,e.width,e.height);var o=S(e,c);t.width=o.width;t.height=o.height;a.drawImage(o,0,0)}if(c.length>0){for(var n in c)if(c[n].src)if(m.indexOf(-1==c[n].src)){s.addImage(c[n].src);m.push(c[n].src)}s.addCompletionListener(function(e){r()});s.start()}else r();t.style.zoom="100%"==t.style.zoom?"100.0001%":"100%";return 1};var W=function(e,t){var a=parseFloat(t.left)*i,r=parseFloat(t.right)*i,n=parseFloat(t.top)*i,l=parseFloat(t.bottom)*i;var d=parseFloat(e.width)+a+r;var s=parseFloat(e.height)+n+l;var f=document.createElement("canvas");f.width=d;f.height=s;var c=f.getContext("2d");if("undefined"===typeof t["type"]||"matboard"===t["type"]){c.fillStyle=t.color;c.fillRect(0,0,f.width,f.height)}else{var m=new Image;m.src=t.src;var h=m.height;var p=parseFloat((i*t.width/h).toFixed(2));var u=parseInt(f.width/p);var g=parseInt(f.height/p);c.fillStyle=c.createPattern(m,"repeat-x");c.save();c.scale(p,p);c.fillRect(0,0,u,m.height);c.restore();c.save();c.scale(p,p);c.beginPath();c.translate(u,g);c.rotate(180*o);c.moveTo(0,0);c.fillRect(0,0,u,m.height);c.rotate(180*o);c.restore();c.save();c.scale(p,p);c.translate(0,g);c.rotate(-90*o);c.beginPath();c.moveTo(0,0);c.lineTo(m.height,m.height);c.lineTo(g-m.height,m.height);c.lineTo(g,0);c.lineTo(0,0);c.closePath();c.clip();c.fill();c.rotate(90*o);c.translate(0,-g);c.restore();c.save();c.scale(p,p);c.translate(u,0);c.rotate(90*o);c.beginPath();c.moveTo(0,0);c.lineTo(m.height,m.height);c.lineTo(g-m.height,m.height);c.lineTo(g,0);c.lineTo(0,0);c.closePath();c.clip();c.fill();c.rotate(-90*o);c.translate(-u,0);c.restore()}c.drawImage(e,a,n);return f};var S=function(e,t){if(0==t.length)return e;if("undefined"!==typeof t[t.length-1]["type"]&&"matboard"==t[t.length-1]["type"])e=F(e);if(1==t.length){e=x(e,.4);return W(e,t[0])}else{e=x(e,.25);var a=W(e,t[t.length-1]);return S(a,t.slice(0,t.length-1))}};var q=function(e,t,a,i,o,r){o.textBaseline="bottom";o.font=.1*r.width+"px "+"Arial";o.fillText("Photo Frame",.5*r.width,.6*r.height);o.textBaseline="top";o.font=.175*r.width+"px "+"Arial";o.fillText(e+inchSymbol+separator+t+inchSymbol,.5*r.width,.61*r.height);o.font=.075*r.width+"px "+"Arial";o.fillText(a+cmSymbol+separator+i+cmSymbol,.5*r.width,.8*r.height)};var T=function(e){var a=250;var i=250;if("undefined"!==typeof e){a=e.width;i=e.height}var o=Math.min(a/t.width,i/t.height);var r=document.createElement("canvas");r.width=Math.floor(t.width*o);r.height=Math.floor(t.height*o);var n=r.getContext("2d");n.fillStyle="#FFFFFF";n.fillRect(0,0,r.width,r.height);n.scale(o,o);n.drawImage(t,0,0);return r};var H=function(e,t,i){var r="#2b2b2b";var n=0;if("v"===t[0])n=90;else n=0;var l=a;l.fillStyle=r;l.strokeStyle=r;l.save();l.scale(3,3);l.translate(e.x,e.y);l.rotate(n*o);l.font="8px Arial";l.textBaseline="middle";var d=l.measureText(i).width+5;l.save();l.beginPath();if(90===n){l.scale(-1,-1);l.fillText(i,5-d,0)}else l.fillText(i,3,0);l.closePath();l.fill();l.restore();l.save();l.beginPath();l.moveTo(d+50,-5);l.lineTo(d+60,0);l.lineTo(d+50,5);l.lineTo(d+50,-5);l.fill();l.closePath();l.restore();l.save();l.beginPath();l.lineWidth=2;l.moveTo(d+50,0);l.lineTo(d,0);l.stroke();l.closePath();l.restore();l.restore()};var P=function(){return c.length};return{clearFrames:y,addFrame:v,removeFrame:$,createFrame:w,createMat:_,setPlaceholderText:C,draw:I,init:g,setImage:u,rotateImage:p,addItem:b,thumb:T,frameCount:P}};if(!String.prototype.startsWith)String.prototype.startsWith=function(e,t){t=t||0;return this.indexOf(e,t)===t};if(!String.prototype.endsWith)String.prototype.endsWith=function(e,t){var a=this.toString();if("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>a.length)t=a.length;t-=e.length;var i=a.indexOf(e,t);return-1!==i&&i===t};var t="";$(document).ready(function(){$('[name="printing-type"]').on({change:function(){$(".printing-info").hide();$('.printing-info[data-info-id="'+$(this).val()+'"]').show()}});$('[name="matt-canvas-printing-type"]').on({change:function(){$(".offtwl__matt-canvas-printing-info").hide();$('.offtwl__matt-canvas-printing-info[data-info-id="'+$(this).val()+'"]').show()}});$('[name="glass-type"]').on({change:function(){$(".offtwl__glass-notes").hide();$('.offtwl__glass-notes[data-info-id="'+$(this).val()+'"]').show()}});$('[name="backing-type"]').on({change:function(){$(".backing-info").hide();$('.backing-info[data-info-id="'+$(this).val()+'"]').show()}});$('[data-toggle="tooltip"]').tooltip();$('[data-toggle="popover"]').popover({trigger:"focus"})});function a(e){return(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?"black":"white"}function i(){var e=document.querySelector("#offtwl__dmnsn-width"),t=document.querySelector("#offtwl__dmnsn-height"),a=document.querySelector("#offtwl__dimension-type-wrapper input[name=unit-type]:checked").value;e.value<0&&(e.value=1),t.value<0&&(t.value=1),"cm"==a?(e.value,t.value):(e.value>60&&(e.value=60),t.value>60&&(t.value=60))}function o(){if("true"==$("#offtwl__dimention-image-ratio").attr("data-locked")){var e=p.printing.image.aspectRatio;"width"==$(this).attr("data-for")?$("#offtwl__dmnsn-height").val(($(this).val()/e).toFixed(1)):$("#offtwl__dmnsn-width").val(($(this).val()*e).toFixed(1))}}function r(e){e.startsWith("108")?($('[name=offtwl__how-many-mats][value="0"]').click(),$("[name=glass-type][value=no-glass]").click(),$("[name=backing-type][value=none]").click(),$("[name=slip][value=none]").click(),$(".remove-image").click(),$("[name=printing-type][value=none]").click(),$("[name=matt-canvas-printing-type][value=matt-canvas-none]").click(),$('#upload, [aria-controls="offtwl__mats-tab"], [aria-controls="offtwl__glass-and-backing-tab"], [aria-controls="tab-slips"], [aria-controls="offtwl__fillets-tab"], [aria-controls="offtwl__print-info-tab"]').fadeOut(150)):($("[name=glass-type][value=clear-glass]").click(),"none"===$("[name=backing-type]:checked").val()&&$('[name=backing-type][value="offtwl__backing-type-adhesive-foamcore"]').click(),$('#upload, #show-more-tabs, [aria-controls="offtwl__mats-tab"], [aria-controls="offtwl__glass-and-backing-tab"], [aria-controls="offtwl__print-info-tab"]').fadeIn(150),$("#show-more-tabs").parent().fadeIn(150))}function n(e){$("#frame-detail-code").html(e.frameCode),$("#frame-detail-depth").html(e.frameDepth.toFixed(1)+" cm"),$("#frame-detail-width").html(e.frameWidth.toFixed(1)+" cm"),$("#frame-detail-rebate").html(e.frameRebate.toFixed(1)+" cm"),$("#frame-detail-colour").html(e.frameDesc),$("#frame-detail-material").html(e.frameMaterial);var t=$("#frame-detail-description");e.frameDescription?(t.html(e.frameDescription),t.parent().show()):t.parent().hide()}function l(){var e=m/300;if("cm"==$("span.offtwl__dmnsn-inch-cm").html())var t=Math.min(e/($("#offtwl__dmnsn-width").val()/2.54)*100,100);else var t=Math.min(e/$("#offtwl__dmnsn-width").val()*100,100);t<=0?($("#offtwl__upload-quality-progress").css("width","100%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-danger progress-bar-good progress-bar-excellent progress-bar-warning"),$("#offtwl__upload-quality-progress").addClass("progress-bar-info"),$("#offtwl__upload-quality-text").html("No Image Detected")):t>0&&t<=25?($("#offtwl__upload-quality-progress").css("width",t+"%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-good progress-bar-excellent progress-bar-warning progress-bar-info"),$("#offtwl__upload-quality-progress").addClass("progress-bar-danger"),$("#offtwl__upload-quality-text").html("Poor")):t>25&&t<=40?($("#offtwl__upload-quality-progress").css("width",t+"%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-good progress-bar-excellent progress-bar-danger progress-bar-info"),$("#offtwl__upload-quality-progress").addClass("progress-bar-warning"),$("#offtwl__upload-quality-text").html("Not Bad")):t>40&&t<70?($("#offtwl__upload-quality-progress").css("width",t+"%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-warning progress-bar-danger progress-bar-excellent progress-bar-info"),$("#offtwl__upload-quality-progress").addClass("progress-bar-good"),$("#offtwl__upload-quality-text").html("Good")):t>70&&t<90?($("#offtwl__upload-quality-progress").css("width",t+"%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-warning progress-bar-danger progress-bar-excellent progress-bar-info"),$("#offtwl__upload-quality-progress").addClass("progress-bar-good"),$("#offtwl__upload-quality-text").html("Great")):($("#offtwl__upload-quality-progress").css("width",t+"%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-danger progress-bar-warning progress-bar-good progress-bar-info"),$("#offtwl__upload-quality-progress").addClass("progress-bar-excellent"),$("#offtwl__upload-quality-text").html("Excellent"))}function d(e){var t=$("#no-mdf-info");!0===e?($("[name=backing-type][value=offtwl__backing-type-adhesive-foamcore]").click(),$("[name=backing-type][value=offtwl__backing-type-mdf]").prop("disabled",!0).addClass("disabled").parent().addClass("disabled").find(".offtwl__outer-el").addClass("disabled"),t.show()):($("[name=backing-type][value=offtwl__backing-type-mdf]").prop("disabled",!1).removeClass("disabled").parent().removeClass("disabled").find(".offtwl__outer-el").removeClass("disabled"),t.hide())}function s(e){1==e?($("[name=printing-type]").prop("disabled",!1).addClass("disabled").parent().removeClass("disabled").find(".offtwl__outer-el").removeClass("disabled"),d(!0)):($("[data-paper-type=none]").click(),$("[name=printing-type]").prop("disabled",!0).addClass("disabled").parent().addClass("disabled").find(".offtwl__outer-el").addClass("disabled"),d(),$(".offtwl__image-description").fadeOut(150),$(".offtwl__upload-img-quality-holder").fadeOut(150),$("#upload-info-alert").fadeIn(150),p.printing={paper:"none",image:{url:"",originalWidth:0,originalHeight:0,aspectRatio:0,name:""},price:0},x.setImage(),$("#offtwl__dimention-image-ratio").attr("data-locked",!1),x.draw())}function f(){var e=$(this).find(".toggle-icon");e.hasClass("fa-plus")?e.removeClass("fa-plus").addClass("fa-minus"):e.removeClass("fa-minus").addClass("fa-plus")}function c(){var e=document.querySelector("[name=offtwl__typeof-matboard-wdt]:checked").value,t=parseFloat(this.min),a=parseFloat(this.max),i=parseFloat(this.value),o=i;if(i<t?o=t:i>a&&(o=a),o!=i&&(this.value=o,"offtwl__unifrm"===e))for(var r=document.getElementById("offtwl__fldst-var").querySelectorAll("input[type=number]"),n=0;n<r.length;n++)r[n].value=o;g.calc()}var m=0,h=0;$("#show-more-tabs").on("click tap",function(e){e.preventDefault(),$("#show-more-tabs").parent().fadeOut(50),$(".hidden-tabs").fadeIn(150),$("#ui-id-6").click(),$(".offtwl__cardbox-tab-list a").css({padding:"5px 5px","font-size":"1.3rem"})}),$("[id^=frame-tab]").each(function(){var e="#"+$(this).attr("id")+" img.lazy";$(e).lazyload({effect:"fadeIn",threshold:20,container:$("#"+$(this).attr("id"))})});var p={imageWidth:10.16,imageHeight:15.24,printing:{paper:"none",image:{file:"",originalWidth:0,originalHeight:0,aspectRatio:0,name:""},price:0},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,frame:{frameCode:"224F",frameDepth:2,frameDesc:"Black",frameId:238,frameMaterial:"Wood",frameMax:120,frameMin:10,frameRate:2,frameRebate:.5,frameTile:"top_frame_238.jpg",frameWidth:2},slip:{frame:{frameId:""},price:0},fillet:{frame:{frameId:""},price:0},glass:void 0,backing:void 0,matboards:{mat1:{id:"",colorCode:"",top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0},mat2:{id:"",colorCode:"",top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0}},price:0,discountedPrice:0,newDiscountedPrice:0,framePrice:0,glassPrice:0,backingPrice:0,quantity:0,productType:"custom-frame"};n(p.frame),$("#order-step-tabs").tabs(),$("#offtwl__frame-ctgry-tab").tabs(),$("#offtwl__frame-ctgry-tab").tabs("option","active",$('[href="#offtwl__frm-tab-blacks"]').parent().index());var u=function(){var e=$("#offtwl__glance-discount-row-value"),t=$("#offtwl__glance-discount-row-percent"),a=parseInt(t.data("discount-percentage")),o=a/100;function r(i,r){var n=i,l=(n*o).toFixed(4),d=n-l;if("number"===typeof d){t.html(a+"%");e.html(l)}p.newDiscountedPrice=d;p.discountedPrice=l;return d}var n,l=!1,d=[],f=[],c=$("#offtwl__dmnsn-width"),u=$("#offtwl__dmnsn-height"),g=!1,w=!1,v=!0,b=!1,y=!1,k=!1,C=!1,F=!1,I=function(){if(l)return!0;$.ajax({type:"GET",url:"static/json/price-list.json",success:function(e){n=e,l=!0,z()},error:function(e,t,a){void 0}})},W=function(e,t){x.setImage(e,"picture",function(){$("#preset-type-list").addClass("disabled").prop("disabled",!0),$(".offtwl__ratio-locking.fa-lock").removeClass("hidden"),$(".offtwl__ratio-locking.fa-unlock").addClass("hidden"),$("#offtwl__dmnsn-width").val((.015*e.width).toFixed(2)),$("#offtwl__dmnsn-height").val((.015*e.height).toFixed(2)),t&&"function"==typeof t&&t(),z()})},q=function(){if(p.printing.paper=$("[name=printing-type]:checked").val(),p.glass=$("[name=glass-type]:checked").val(),p.backing=$("[name=backing-type]:checked").val(),b=$('[name="slip"][value="add"]').prop("checked")){var e=p.slip.frame.frameCode;""==p.slip.frame.frameId&&""!=e&&(p.slip.frame.frameId=$("[data-frame-code="+e+"]").data("frameId"))}else p.slip.frame.frameId="";if(y=$('[name="fillet"][value="add"]').prop("checked")){var t=p.fillet.frame.frameCode;""==p.fillet.frame.frameId&&""!=t&&(p.fillet.frame.frameId=$("[data-frame-code="+t+"]").data("frameId"))}else p.fillet.frame.frameId="";F="none"!=p.printing.paper},T=function(){var e=p,t="inch"==S;e.imageWidth=parseFloat(c.val()),e.imageHeight=parseFloat(u.val()),t&&(e.imageWidth*=2.54,e.imageHeight*=2.54),e.imageWidth=parseFloat(e.imageWidth).toFixed(2),e.imageHeight=parseFloat(e.imageHeight).toFixed(2),e.innerWidth=parseFloat(e.imageWidth),e.innerHeight=parseFloat(e.imageHeight);for(var a in e.matboards)e.innerWidth+=parseFloat(e.matboards[a].left)||0,e.innerWidth+=parseFloat(e.matboards[a].right)||0,e.innerHeight+=parseFloat(e.matboards[a].top)||0,e.innerHeight+=parseFloat(e.matboards[a].bottom)||0;y&&(e.innerWidth+=2*e.fillet.frame.frameWidth,e.innerHeight+=2*e.fillet.frame.frameWidth),e.innerWidth=parseFloat(e.innerWidth).toFixed(2),e.innerHeight=parseFloat(e.innerHeight).toFixed(2),e.outerWidth=(parseFloat(e.innerWidth)+2*parseFloat(e.frame.frameWidth)-2*parseFloat(e.frame.frameRebate)).toFixed(2),e.outerHeight=(parseFloat(e.innerHeight)+2*parseFloat(e.frame.frameWidth)-2*parseFloat(e.frame.frameRebate)).toFixed(2);var i=e.innerWidth>=10&&e.innerHeight>=10,o=e.innerWidth<=152.5&&e.innerHeight<=152.5,r=e.innerWidth<=152.5&&e.innerHeight<=101.6||e.innerWidth<=101.6&&e.innerHeight<=152.5;v=Math.max(e.innerWidth,e.innerHeight)<=e.frame.frameMax,$("#max-frame-length-error").html(e.frame.frameMax),g=i&&e.imageWidth<=152.5&&e.imageHeight<=152.5&&(e.imageWidth<=152.5&&e.imageHeight<=101.6||e.imageWidth<=101.6&&e.imageHeight<=152.5),w=i&&r&&o,_.debounce(function(){g&&!w?$("#offtwl__mat1-dimnsn-not-valid, #mat2-dimensions-invalid").show(250):g&&$("#offtwl__mat1-dimnsn-not-valid, #mat2-dimensions-invalid").hide(250),w?$("#offtwl__dmnsn-warning").fadeOut(150):$("#offtwl__dmnsn-warning").fadeIn(150),!v&&w?$("#larger-than-max-error").show(250):$("#larger-than-max-error").hide(250)},500)()},H=function(){if(!l)return!1;var e=void 0,t=void 0,a=void 0,i=!1,o=!1,d=parseFloat(p.imageWidth)+parseFloat(p.imageHeight),s=parseFloat(p.innerWidth)+parseFloat(p.innerHeight),c=s+4*(b?parseFloat(p.slip.frame.frameWidth):0);p.quantity=parseFloat($("#offtwl__product-quantity").val()||1);for(var m in n)if(!i&&m>=d&&(a=n[m],i=!0),!o&&m>=s&&(t=n[m],o=!0),m>=c){e=n[m];break}if(e)if(w&&v){$("#offtwl__addToCartButton").prop("disabled",!1);void 0;void 0;void 0;void 0;void 0;var h=p.framePrice=parseFloat(e.rate[p.frame.frameRate]),u=p.matboards.mat1.price=""!=k?t.top_mat:0,g=p.matboards.mat2.price=""!=C?t.middle_mat:0,_=p.fillet.price=y?a.rate[p.fillet.frame.frameRate]:0,x=p.slip.price=b?t.rate[p.slip.frame.frameRate]:0,I=p.glassPrice=parseFloat(t[p.glass])||0,W=p.backingPrice=parseFloat(t[p.backing])||0,S=p.printing.price=F?parseFloat(a[p.printing.paper]):0,q=h+u+g+_+x+I+W+S,T=(q*p.quantity).toFixed(2);p.price=T,$(f).each(function(){var e=r(T);void 0;$(this).html("$"+e)})}else $(f).each(function(){$(this).html("N/A")}),$("#offtwl__addToCartButton").prop("disabled",!0)},P=function(){var e={width:p.frame.frameWidth,src:"./images/frame_images/large/"+p.frame.frameTile};self.isFloat=p.frame.frameCode.startsWith("108"),x.addFrame(e)},O=function(){var e={width:p.slip.frame.frameWidth,src:"./images/frame_images/large/"+p.slip.frame.frameTile};x.addFrame(e)},E=function(){var e={width:p.fillet.frame.frameWidth,src:"./images/frame_images/large/"+p.fillet.frame.frameTile};x.addFrame(e)},L=function(){var e,t,a,i,o=p.matboards,r=parseInt(document.querySelector("[name=offtwl__how-many-mats]:checked").value),n=document.querySelector("[name=offtwl__typeof-matboard-wdt]:checked").value;if(k=!1,C=!1,r>0){if(k=!0,"offtwl__unifrm"==n)e=t=a=i=document.getElementById("offtwl__unifrm-width").value;else"variable"==n&&(e=document.getElementById("offtwl__dimnsn-top").value,a=document.getElementById("offtwl__dimnsn-bottom").value,t=document.getElementById("offtwl__dimnsn-left").value,i=document.getElementById("offtwl__dimnsn-right").value);"inch"==S&&(e*=2.54,a*=2.54,t*=2.54,i*=2.54),o.mat1.top=e,o.mat1.bottom=a,o.mat1.left=t,o.mat1.right=i,x.createMat(e,i,a,t,"#"+o.mat1.colorCode),r>1&&(C=!0,e=t=a=i=document.getElementById("offtwl__matboard-2-wdt").value,"inch"==S&&(e*=2.54,a*=2.54,t*=2.54,i*=2.54),o.mat2.top=e,o.mat2.bottom=a,o.mat2.left=t,o.mat2.right=i,x.createMat(e,i,a,t,"#"+o.mat2.colorCode))}for(var l=Object.keys(o),d=r;d<l.length;d++)o[l[d]]={id:"",colorCode:o[l[d]].colorCode,top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0}},M=function(){i(),x.draw({width:p.imageWidth,height:p.imageHeight})},R=function(){var e=parseFloat(parseFloat($("#offtwl__dmnsn-width").val()).toFixed(2)),t=parseFloat(parseFloat($("#offtwl__dmnsn-height").val()).toFixed(2)),a=.12,i=.6;(e>=40||t>=40)&&(i=1,a=.39);var o="cm"===S?i:a,r=parseFloat(parseFloat(e-o).toFixed(2)),n=parseFloat(parseFloat(t-o).toFixed(2)),l=["Image Size:",e,"x",t,S,"\n","Visible (approx):",r,"x",n,S,"\n","Outer Size (approx):",p.outerWidth,"x",p.outerHeight,"cm"].join(" ");x.setPlaceholderText(l)},B=function(){b?$("#offtwl__glance-slip-row").fadeIn(100):$("#offtwl__glance-slip-row").fadeOut(100),y?$("#offtwl__glance-fillet-row").fadeIn(100):$("#offtwl__glance-fillet-row").fadeOut(100),k?$("#offtwl__glance-mat-top-row").fadeIn(100):$("#offtwl__glance-mat-top-row").fadeOut(100),C?$("#offtwl__glance-mat-bottom-row").fadeIn(100):$("#offtwl__glance-mat-bottom-row").fadeOut(100),F?$("#offtwl__glance-printing-row").fadeIn(100):$("#offtwl__glance-printing-row").fadeOut(100);var e=new RegExp("-","g");$("#offtwl__glance-frame").html(p.frame.frameCode),$("#offtwl__glance-slip").html(p.slip.frame.frameCode),$("#offtwl__glance-fillet").html(p.fillet.frame.frameCode),$("#offtwl__glance-mat-top").html(p.matboards.mat1.matName),$("#offtwl__glance-mat-bottom").html(p.matboards.mat2.matName),$("#offtwl__glance-glass").html(p.glass.replace(e," ").replace("glass","")),$("#offtwl__glance-backing").html(p.backing.replace(e," ").replace("glass","")),$("#offtwl__glance-image-size").html(p.imageWidth+" x "+p.imageHeight+" cm"),$("#offtwl__glance-glass-size").html(p.innerWidth+" x "+p.innerHeight+" cm"),$("#offtwl__glance-outer-size").html(p.outerWidth+" x "+p.outerHeight+" cm"),$("#summary-printing").html(p.printing.paper),$("#offtwl__glance-frame-price").html("$ "+p.framePrice.toFixed(2)),$("#offtwl__glance-slip-price").html("$ "+p.slip.price.toFixed(2)),$("#offtwl__glance-fillet-price").html("$ "+p.fillet.price.toFixed(2)),$("#offtwl__glance-mat-top-price").html("$ "+p.matboards.mat1.price.toFixed(2)),$("#offtwl__glance-mat-bottom-price").html("$ "+p.matboards.mat2.price.toFixed(2)),$("#offtwl__glance-glass-price").html("$ "+p.glassPrice.toFixed(2)),$("#offtwl__glance-backing-price").html("$ "+p.backingPrice.toFixed(2)),$("#summary-printing-price").html("$ "+p.printing.price.toFixed(2)),$("#error-current-selection-size").html($("#offtwl__glance-glass-size").html())},A=function(e,t){var a=[];$('[id^="frame-tab"] [data-frame-code]').each(function(){a.push(this)});var i=_.filter(a,e,t);return _.sortBy(i,function(e){return e.dataset.frameWidth})},D=function(e,t){var a=function(t){return t.dataset.frameMax<e},i=A(a);$(".unstable-frame").removeClass("unstable-frame"),$(".unstable-frame-hidden").removeClass("unstable-frame-hidden"),!0===t?$(i).addClass("unstable-frame").addClass("unstable-frame-hidden"):$(i).addClass("unstable-frame")},z=function(){x.clearFrames(),q(),P(),b&&O(),L(),y&&E(),T(),D(Math.max(p.imageWidth,p.imageHeight),$("#hide-unstable-frames").prop("checked")),R(),M(),H(),B(),$(document.body).trigger("sticky_kit:recalc")},j=_.debounce(z,100,{leading:!0}),N=function(e){$(e).on("change input click",j),d.push($(e))},U=function(){return n};return $(document).ready(function(){s(1),$(".remove-image").on("click",function(){s(1),$(".offtwl__ratio-locking.fa-lock").addClass("hidden"),$(".offtwl__ratio-locking.fa-unlock").removeClass("hidden"),$("#preset-type-list").removeClass("disabled").prop("disabled",!1),$("#offtwl__upload-quality-progress").css("width","100%"),$("#offtwl__upload-quality-progress").removeClass("progress-bar-danger progress-bar-good progress-bar-excellent progress-bar-warning"),$("#offtwl__upload-quality-progress").addClass("progress-bar-info"),$("#offtwl__upload-quality-text").html("No Image Detected"),m=0,h=0}),$("[data-offtwl__calculation-item]").each(function(e,t){d.push(t),$(t).on("change",j).on("input",j).on("click",function(){"SPAN"===$(this).prop("tagName")&&j()})}),$("[data-price-subscriber]").each(function(e,t){f.push(t)}),$(".modal").on("shown.bs.modal",function(){if($(window).width()<768){var e=window.innerHeight;$(".modal-body > iframe").css("height",e-130)}else $(this).find(".modal-body > iframe").css("height",.7*$(window).height());$(this).find("iframe").attr("src","gallery.php")})}),{init:I,addBroadcaster:N,setImage:W,prices:U,filter:A,calc:j}},g=new u;g.init(),$("[name=fillet][value=add]").parent().on("click",function(){1==$(this).children(":first").prop("disabled")&&$("#fillet-no-mat-warning").fadeIn()}),$("[name=fillet]").on("change",function(e){"add"==$("[name=fillet]:checked").val()&&(0==parseInt($("[name=offtwl__how-many-mats]:checked").val())?($("#fillet-no-mat-warning").fadeIn(),$('[name=fillet][value="none"]').click()):$("#fillet-no-mat-warning").fadeOut(),""===p.fillet.frame.frameId&&$(".offtwl__thumb-frame-container.fillet-frame").first().click())});var w="",v=p.matboards;document.getElementById("offtwl__unifrm-width").addEventListener("input",function(){for(var e=document.querySelectorAll("#variable-width input[type=number]"),t=0;t<e.length;t++)e[t].value=this.value});for(var b=document.querySelectorAll("[name=offtwl__typeof-matboard-wdt]"),y=0;y<b.length;y++)b[y].addEventListener("change",function(){switch(document.querySelector("[name=offtwl__typeof-matboard-wdt]:checked").value){case"offtwl__unifrm":document.getElementById("offtwl__unifrm-width").disabled=!1,document.getElementById("variable-width").disabled=!0;break;case"variable":document.getElementById("offtwl__unifrm-width").disabled=!0,document.getElementById("variable-width").disabled=!1}});for(var k=document.querySelectorAll(".offtwl__matboard-sqr"),C=0;C<k.length;C++)k[C].style.color=a(k[C].dataset.colorCode),k[C].addEventListener("click",function(e){v[this.dataset.offtwl__matObj].id=this.dataset.matId,v[this.dataset.offtwl__matObj].colorCode=this.dataset.colorCode,v[this.dataset.offtwl__matObj].matCode=this.dataset.code,v[this.dataset.offtwl__matObj].matName=this.dataset.name,w=this.dataset.colorCode;var t=document.querySelector('[data-slider-value="'+this.dataset.sliderValue+'"][data-selected="true"]');t&&(t.dataset.selected=!1,t.innerHTML=""),this.dataset.selected=!0,this.innerHTML='<span class="offtwl__selected-icon flaticon-checked21"></span>';var a=document.querySelector("[name=offtwl__how-many-mats]:checked");parseInt(a.value)<1&&document.querySelector('[name="offtwl__how-many-mats"][value="1"]').click()}),g.addBroadcaster(k[C]);$("[name=offtwl__how-many-mats]").on("change",function(e){switch(parseInt($("[name=offtwl__how-many-mats]:checked").val())){case 0:$("#offtwl__field-matboard-1").prop("disabled",!0),$("#fieldset-matboard-2").fadeOut(),$('[name=fillet][value="none"]').click(),$('[name=fillet][value="add"]').prop("disabled",!0),$("#fillet-no-mat-warning").fadeIn(),$(".offtwl__matboard-sqr[data-selected=true]").html("").attr("data-selected",!1);break;case 1:$("#offtwl__field-matboard-1").prop("disabled",!1),$("#fieldset-matboard-2").fadeOut(),$("#fillet-no-mat-warning").fadeOut(),$('[name=fillet][value="add"]').prop("disabled",!1),""==v.mat1.id&&(""!=v.mat1.colorCode?$(".offtwl__matboard-sqr[data-offtwl__mat-obj=mat1][data-color-code="+v.mat1.colorCode+"]").click():$(".offtwl__matboard-sqr[data-offtwl__mat-obj=mat1]").first().click());break;case 2:$("#offtwl__field-matboard-1").prop("disabled",!1),$("#fieldset-matboard-2").fadeIn(),$("#fillet-no-mat-warning").fadeOut(),$('[name=fillet][value="add"]').prop("disabled",!1),""==v.mat1.id&&(""!=v.mat1.colorCode?$(".offtwl__matboard-sqr[data-offtwl__mat-obj=mat1][data-color-code="+v.mat1.colorCode+"]").click():$(".offtwl__matboard-sqr[data-offtwl__mat-obj=mat1]").first().click()),""==v.mat2.id&&(""!=v.mat2.colorCode?$(".offtwl__matboard-sqr[data-offtwl__mat-obj=mat2][data-color-code="+v.mat2.colorCode+"]").click():$(".offtwl__matboard-sqr[data-offtwl__mat-obj=mat2]").first().click())}});var x=new e,F=10.1,I=15.2,W=!1;$("#offtwl__dimension-type-wrapper input[name=unit-type]:first ~ span").click();for(var S=document.querySelector("#offtwl__dimension-type-wrapper input[name=unit-type]:checked").value,q=function(){var e=[];return{subscribe:function(t){e.push(t)},unsubscribe:function(t){for(;-1!=e.indexOf(val);)e.splice(y,1)},convertUnits:function(){for(var t="cm"==S?"inch":"cm",a=0;a<e.length;a++)switch(S){case"inch":if("offtwl__dmnsn-unit-label"==e[a].dataset.type){e[a].innerHTML="cm";break}if("offtwl__dmnsn-unit-value"==e[a].dataset.type){e[a].innerHTML=e[a].dataset.cmValue;break}if("standard-conversion"==e[a].dataset.type){e[a].innerHTML=(2.54*parseFloat(e[a].innerHTML)).toFixed(1);break}F=(2.54*parseFloat(F)).toFixed(1),I=(2.54*parseFloat(I)).toFixed(1),e[a].value=(2.54*e[a].value).toFixed(1),e[a].setAttribute("min",e[a].dataset.cmMin),e[a].setAttribute("max",e[a].dataset.cmMax),e[a].setAttribute("step",e[a].dataset.cmStep);break;case"cm":if("offtwl__dmnsn-unit-label"==e[a].dataset.type){e[a].innerHTML="inch";break}if("offtwl__dmnsn-unit-value"==e[a].dataset.type)e[a].innerHTML=e[a].dataset.inchValue;else if("standard-conversion"==e[a].dataset.type){e[a].innerHTML=(parseFloat(e[a].innerHTML)/2.54).toFixed(1);break}F=(parseFloat(F)/2.54).toFixed(1),I=(parseFloat(I)/2.54).toFixed(1),e[a].value=(e[a].value/2.54).toFixed(1),e[a].setAttribute("min",e[a].dataset.inchMin),e[a].setAttribute("max",e[a].dataset.inchMax),e[a].setAttribute("step",e[a].dataset.inchStep)}S=t}}},T=new q,H=document.querySelectorAll(".offtwl__dmnsn-inch-cm"),y=0;y<H.length;y++)T.subscribe(H[y]);for(var P=document.querySelectorAll("#offtwl__dimension-type-wrapper input[type=radio]"),y=0;y<P.length;y++)P[y].addEventListener("change",function(){T.convertUnits()});$("#offtwl__dmnsn-width, #offtwl__dmnsn-height").on("input change",o),x.init("canvas"),$(".offtwl__select-frame-container").mousewheel(function(e,t){this.scrollLeft-=45*t,e.preventDefault()}),$(".offtwl__thumb-frame-container").each(function(){$(this).hasClass("slip-frame")?$(this).on("click",function(){$(".slip-thumb-selected").removeClass("slip-thumb-selected"),$(this).addClass("slip-thumb-selected"),p.slip.frame=$.extend(!0,{},$(this).data()),$('[name="slip"]').prop("checked")||$('[name="slip"][value="add"]').click()}):$(this).hasClass("fillet-frame")?$(this).on("click",function(){$(".fillet-thumb-selected").removeClass("fillet-thumb-selected"),$(this).addClass("fillet-thumb-selected"),p.fillet.frame=$.extend(!0,{},$(this).data()),$('[name="fillet"]').prop("checked")||$('[name="fillet"][value="add"]').click()}):$(this).on("click",function(){$(".frame-thumb-selected").removeClass("frame-thumb-selected"),$(this).addClass("frame-thumb-selected"),p.frame=$.extend(!0,{},$(this).data()),r(p.frame.frameCode),n($(this).data()),$("#thumb-selected").removeAttr("id"),$(this).attr("id","thumb-selected")}),g.addBroadcaster($(this))});for(var O=document.querySelectorAll("[name=unit-type]"),y=0;y<O.length;y++)O[y].addEventListener("click",function(e){var t=document.querySelectorAll(".offtwl__data-inch"),a=document.querySelectorAll(".offtwl__data-cm");if("cm"==this.value)for(var i=0;i<t.length;i++)a[i].classList.remove("hidden-xs"),a[i].classList.remove("hidden-sm"),t[i].classList.add("hidden-xs"),t[i].classList.add("hidden-sm");else for(var i=0;i<t.length;i++)a[i].classList.add("hidden-xs"),a[i].classList.add("hidden-sm"),t[i].classList.remove("hidden-xs"),t[i].classList.remove("hidden-sm")});"undefined"==typeof headerCart&&(headerCart=new CartAnnouncements,headerCart.init()),$("#offtwl__addToCartButton").on("click",function(){if("true"!==$(this).attr("data-disabled")){var e={product:p,thumb:x.thumb().toDataURL(),uploadedImg:t},a=$(this);void 0;"true"!==a.attr("data-disabled")&&(a.attr("data-disabled","true"),$.ajax({type:"POST",url:"/custom-picture-frames/add-to-cart",data:e,success:function(e){headerCart.notifyQuantity(e.totalProducts),headerCart.notifyTotalPrice((e.totalPrice||0).toFixed(2)),headerCart.toast(),a.attr("data-disabled","false")},error:function(e,t,i){void 0,void 0,a.attr("data-disabled","false")}}))}}),$(window).width()>=768&&$("#offtwl__sticky-wrapper").stick_in_parent({parent:"#offtwl__product-feature"}),$(window).on("resize",function(){$(this).width()<768?$("#offtwl__sticky-wrapper").trigger("sticky_kit:detach"):$("#offtwl__sticky-wrapper").stick_in_parent({parent:"#offtwl__product-feature"})}),$("#offtwl__sticky-wrapper").on("sticky_kit:bottom",function(e){$(this).parent().css("position","static")}).on("sticky_kit:unbottom",function(e){$(this).parent().css("position","relative")}),$('[id^="frame-tab"]').parent().on("click",function(e){var t=e.target;t.href&&-1!=t.href.indexOf("frame-tab-")&&(t.href.endsWith("#offtwl__frm-tab-float-canvas")?$("#offtwl__frame-warning").slideDown(250):$("#offtwl__frame-warning").slideUp(150))}),$("#frame-code-filter").on("input",function(){if(!($(this).val().length<1)){if(void 0==this.frameData){var e=[];$('[id^="frame-tab"]:not(#offtwl__frm-tab-filtered-result) [data-frame-code]').each(function(){e.push(this)}),this.frameData=e}$('a[href="#offtwl__frm-tab-filtered-result"].ui-tabs-anchor').parent().hasClass("ui-state-active")||$('a[href="#offtwl__frm-tab-filtered-result"].ui-tabs-anchor').click();var t=$(this).val().toUpperCase(),a=_.filter(this.frameData,function(e){return _.startsWith(e.dataset.frameCode.toUpperCase(),t)}),i=$("#offtwl__frm-tab-filtered-result");i.unbind(),i.empty(),i.mousewheel(function(e,t){this.scrollLeft-=45*t,e.preventDefault()}),$(a).each(function(){$(this).clone(!0).appendTo($("#offtwl__frm-tab-filtered-result"))}),$("#offtwl__frm-tab-filtered-result .lazy").lazyload({effect:"fadeIn",threshold:0,container:i})}}),$("#offtwl__listof-frame-rate").on("change",function(){var e=parseInt($(this).val());$('a[href="#offtwl__frm-tab-filtered-result"].ui-tabs-anchor').parent().hasClass("ui-state-active")||$('a[href="#offtwl__frm-tab-filtered-result"].ui-tabs-anchor').click();var t=g.filter(function(t){return e==t.dataset.frameRate}),a=$("#offtwl__frm-tab-filtered-result");a.unbind(),a.empty(),a.mousewheel(function(e,t){this.scrollLeft-=45*t,e.preventDefault()}),$(t).each(function(){$(this).clone(!0).appendTo($("#offtwl__frm-tab-filtered-result"))}),$("#offtwl__frm-tab-filtered-result .lazy").lazyload({effect:"fadeIn",threshold:0,container:a})}),$("[data-frame-filter]").on("click",function(e){e.preventDefault();var t=$(this).data("filterTarget");$("[data-filter-input]").hide(),$(t).show(),$(this).closest(".btn-group").find("#current-filter-type").html($(this).data("filterType"))});var E={getUrlFromIframe:!0,setImageData:function(e,t){this.imageUrl=e.url,this.imageId=e.id;var a=new Image;a.onload=function(){g.setImage(this,function(){s(1),$("#offtwl__dimention-image-ratio").attr("data-locked","true");var i=(a.src.replace(/.*?:\/\//g,"/"),0),o=0;e.pixelWidth&&e.pixelHeight?(i=e.pixelWidth,o=e.pixelHeight,m=e.pixelWidth,h=e.pixelWidth):(i=a.width,o=a.height,m=e.pixelWidth,h=e.pixelWidth),p.printing.image.url=e.file,p.printing.image.id=parseInt(e.id),p.printing.image.name=e.name,p.printing.image.originalWidth=i,p.printing.image.originalHeight=o,p.printing.image.aspectRatio=parseFloat(a.width)/a.height,$("#offtwl__image-glance-name").html(e.name),$(".offtwl__image-description").fadeIn(150),$(".offtwl__upload-img-quality-holder").fadeIn(150),$("#upload-info-alert").fadeOut(150),$("[name=printing-type][value=luster-paper]").click(),$("a[href=#offtwl__print-info-tab]").click(),$("#preset-type-list").val("-"),"cm"==$("span.offtwl__dmnsn-inch-cm").html()?($("#offtwl__dmnsn-width").val(i/60),$("#offtwl__dmnsn-height").val((o/60).toFixed(1)).change()):($("#offtwl__dmnsn-width").val(i/60/2.54),$("#offtwl__dmnsn-height").val((o/60/2.54).toFixed(1)).change()),"function"==typeof t&&t()})},a.src=e.url},imageUrl:"",imageId:-1};$("#offtwl__dmnsn-width, #offtwl__dmnsn-height").on("input change",l),$("[name=printing-type]").on("change",function(){"none"!=$(this).val()?d(!0):d()});var L=new Tour({onStart:function(){var e=document.getElementById("canvas");e.style.zIndex="1101",e.style.background="inherit",e.style.position="relative",e.style.cursor=null},onEnd:function(){var e=document.getElementById("canvas");e.style.zIndex=null,e.style.background=null,e.style.position=null,e.style.cursor="zoom-in"}});L.addStep({element:"body",title:"Let's Get Started!",content:"This 3 minute tour will guide you through making your own custom picture frame for your photos. You can skip steps, return to previous steps or quit the tour at any time. Click 'Next' to get started! You'll be able to change any of the selections you made once you are finished. We'll be skipping 'Slips' and 'Fillets' throughout this tour.",placement:"top",backdropContainer:"body",backdrop:!0}),L.addStep({element:"#offtwl__dimension-tab",title:"Choose Your Size or Upload an Image",content:"If you're framing a print or photo you already have, you can simply enter the size below. If you'd like to get your digital images printed, click on the 'Upload' button and follow the prompts. Once you're ready click 'Next'.",placement:"top",backdrop:!0,backdropContainer:"body"}),L.addStep({element:"#ui-id-1",title:"Let's Look at Frames",content:"We'll continue by checking out some frames, click on the 'Frames' tab to continue.",placement:"bottom",reflex:!0,backdropContainer:"body",backdrop:!0,onNext:function(e){$("#ui-id-1").click()}}),L.addStep({element:"#offtwl__frame-ctgry-tab",title:"Choose a Frame",content:"Click on one of the many frame categories below to view the range. Then browse through and click on your favourite frame below. You can try as many as you like!",placement:"top",backdrop:!0,backdropContainer:"body"}),L.addStep({element:"#ui-id-2",title:"Let's Look at Mat Boards (Optional)",content:"Click on the 'Mats' tab to view our range of matting options.",reflex:!0,placement:"bottom",backdropContainer:"body",backdrop:!0,onNext:function(e){$("#ui-id-2").click()},onPrev:function(e){$("#ui-id-1").click()}}),L.addStep({element:"#offtwl__mats-tab",title:"Choose a Mat Colour (Optional)",content:"A mat board sits between your photo and the frame. Choose your favourite colour to match your frame and image, be creative! Don't forget to try a double mat too for that special touch. Click 'Next' to continue.",placement:"top",backdropContainer:"body",backdrop:!0}),L.addStep({element:"#ui-id-3",title:"Glass and Backings (Optional)",content:"Let's choose the 'Glass & Backing' tab to finish off our frame.",reflex:!0,placement:"bottom",backdropContainer:"body",backdrop:!0,onNext:function(e){$("#ui-id-3").click()},onPrev:function(e){$("#ui-id-2").click()}}),L.addStep({element:"#glass-type-row",title:"Choose Your Type of Glass (Optional)",content:"We recommend 'Clear Perspex' as it is durable, light, UV resistant and as clear as glass! When you click on an option, you'll get to see some extra details on the right hand side.",placement:"top",backdropContainer:"body",backdrop:!0}),L.addStep({element:"#backing-type-row",title:"Select a Backing (Optional)",content:"For acid-free mounting (which will protect your images from fading for longer) choose one of the foam core options. Click on each option to learn more about the different types of backings we offer.",placement:"top",backdropContainer:"body",backdrop:!0}),L.addStep({element:"#quantity-container",title:"Change Your Quantity (Optional)",content:"You can order as many custom picture frames as you'd like!",backdropContainer:"body",placement:"top",backdrop:!0}),L.addStep({element:"#offtwl__addToCartButton",title:"And We're Done!",content:"Click the Add to cart button and you are done! Click on 'End Tour' to see the masterpiece you've created! You can adjust anything you like as you are now a professional online custom picture framer! However, if you feel you need extra help or suggestions, please don't hesitate to <a href=\"/contact-us/\" rel=\"nofollow\">contact us!</a>",backdropContainer:"body",placement:"top",reflex:!0,backdrop:!0}),L.init(),$("#fillet-no-mat-warning a").on("click",function(e){e.preventDefault(),$("[href=#offtwl__mats-tab]").click()}),$(".close").click(function(){$(this).closest(".alert").fadeOut(250)}),$("#hide-unstable-frames").on("click",function(){if($(this).prop("checked")){$(".unstable-frame").addClass("unstable-frame-hidden");var e="#"+$(".ui-tabs-active").last().attr("aria-controls");$(e).scroll()}else $(".unstable-frame-hidden").removeClass("unstable-frame-hidden")}),$("[data-rel^=lightcase]").lightcase({disableShrink:!0,onStart:{generateClone:function(){var e=document.getElementById("canvas"),t=document.createElement("canvas");t.id="canvas-preview-cloned",t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,t.width,t.height),document.getElementById("offtwl__canvas-lightgallery").appendChild(t)}},onCleanup:{removeClone:function(){$("#canvas-preview-cloned").remove()}}}),$("#preset-type-list").on({change:function(){if("-"!=$(this).val()){var e=$("#offtwl__dmnsn-width"),t=$("#offtwl__dmnsn-height"),a=$("[data-value="+$(this).val()+"]"),i="inch"===S?"inch":"cm";e.val(a.data("width-"+i)),t.val(a.data("height-"+i)).change()}}}),$(window).on("unload",function(){p={imageWidth:10.16,imageHeight:15.24,printing:{paper:"none",image:{file:"",originalWidth:0,originalHeight:0,aspectRatio:0,name:""},price:0},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,frame:{frameCode:"224F",frameDepth:2,frameDesc:"Black",frameId:238,frameMaterial:"Wood",frameMax:120,frameMin:10,frameRate:2,frameRebate:.5,frameTile:"top_frame_238.jpg",frameWidth:2},slip:{frame:{frameId:""},price:0},fillet:{frame:{frameId:""},price:0},glass:void 0,backing:void 0,matboards:{mat1:{id:"",colorCode:"",top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0},mat2:{id:"",colorCode:"",top:"",left:"",right:"",bottom:"",matCode:"",matName:"",price:0}},price:0,framePrice:0,glassPrice:0,backingPrice:0,quantity:0,productType:"custom-frame"},n(p.frame)}),$(".next-button").on("click",function(e){e.preventDefault(),$("#list-of-tabs > .ui-tabs-active").next().find("a").click()}),$(".prev-button").on("click",function(e){e.preventDefault(),$("#list-of-tabs > .ui-tabs-active").prev().find("a").click()}),$(".toggle-collapse").on("click",function(){f.call(this)});var M=$(window).width(),R=!1;$("#offtwl__frame-details-info").collapse("hide"),$("#offtwl__frame-details-info-icon").removeClass("fa-minus").addClass("fa-plus"),$("#offtwl__frame-details-info").on("shown.bs.collapse",function(){R=!0}).on("hidden.bs.collapse",function(){R=!1}),$(window).on("load resize",function(){var e=$(window).width();e!==M&&($(this).width()<768&&R&&($("#offtwl__frame-details-info").collapse("hide"),$("#offtwl__frame-details-info-icon").removeClass("fa-minus").addClass("fa-plus"),R=!1),M=e)});var B=$("#order-step-tabs");$(".offtwl__product-glance-link").on("click tap",function(e){var t=B.offset();e.preventDefault();var a=$(this).attr("data-href");$("html, body").animate({scrollTop:t.top}),$("[href=#"+a+"]").click()});var A=document.querySelector("#offtwl__form-matboard").querySelectorAll("input[type=number]");!function(){for(var e=0;e<A.length;e++)A[e].onblur=c}();function D(){var e=$(".upload-input-inside-btn");e.on({change:function(e){var a=$(this),i=e.target,o=a.val().split(".").pop().toLowerCase();if(-1==$.inArray(o,["gif","png","jpg","jpeg"]))alert("only 'gif','png','jpg','jpeg' are allowd!");else if(i.files&&i.files[0]){var r=new FileReader;r.onload=function(e){var a=URL.createObjectURL(i.files[0]);uploaded_img=new Image;uploaded_img.src=a;uploaded_img.onload=function(){if("undefined"!==typeof E){var e=document.createElement("canvas");e.width=this.naturalWidth;e.height=this.naturalHeight;e.getContext("2d").drawImage(this,0,0);t=r.result;var i=uploaded_img.width;var o=uploaded_img.height;a=a.replace(/^[a-z]{4}\:\/{2}[a-z]{1,}\:[0-9]{1,4}.(.*)/,"/$1");void 0;void 0;var n=a.substring(a.lastIndexOf("/")+1);E.setImageData({url:a,id:100,name:n,file:n,pixelWidth:i,pixelHeight:o});return}}};r.readAsDataURL(i.files[0])}}})}D();